<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>C·∫Øm C√¢u C√° L√≥c - Phi√™n b·∫£n Ho√†n Ch·ªânh</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Arial', sans-serif;
        }
        
        :root {
            --primary-color: #ffc800;
            --secondary-color: #0046a0;
            --danger-color: #c80000;
            --success-color: #0a640a;
            --warning-color: #b4b400;
            --christmas-color: #ff0000;
        }
        
        body {
            background: linear-gradient(135deg, #0a640a, #1e7c1e, #2a8a2a);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            padding: 10px;
        }
        
        #game-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
            min-height: 90vh;
            position: relative;
            overflow: hidden;
        }
        
        #game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--success-color));
            z-index: 10;
        }
        
        .screen {
            display: none;
            width: 100%;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block !important;
        }
        
        h1, h2, h3 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            font-size: 24px;
            background: linear-gradient(45deg, var(--primary-color), #ffeb3b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(50, 50, 50, 0.9);
            padding: 15px;
            border-radius: 15px;
            font-size: 14px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .stat-item::after {
            content: '';
            position: absolute;
            right: 0;
            top: 10%;
            height: 80%;
            width: 1px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .stat-item:last-child::after {
            display: none;
        }
        
        .button {
            display: block;
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            background: var(--primary-color);
            color: black;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .button:hover::before {
            left: 100%;
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }
        
        .button:active {
            transform: translateY(0);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .button.red {
            background: linear-gradient(45deg, var(--danger-color), #ff4444);
            color: white;
        }
        
        .button.blue {
            background: linear-gradient(45deg, var(--secondary-color), #0066cc);
            color: white;
        }
        
        .button.green {
            background: linear-gradient(45deg, var(--success-color), #2a8a2a);
            color: white;
        }
        
        .button.market {
            background: linear-gradient(45deg, var(--warning-color), #d4d400);
            color: white;
        }
        
        .button.christmas {
            background: linear-gradient(45deg, var(--christmas-color), #ff4444);
            color: white;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--christmas-color); }
            50% { box-shadow: 0 0 20px var(--christmas-color); }
        }
        
        .button.premium {
            background: linear-gradient(45deg, #ffd700, #ff6b00);
            color: black;
            border: 2px solid #ffd700;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(100, 100, 100, 0.5);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .hp-bar .progress-fill {
            background: linear-gradient(90deg, #ff0000, #ff6b6b);
        }
        
        .exp-bar .progress-fill {
            background: linear-gradient(90deg, #00ffff, #00b3b3);
        }
        
        .energy-bar .progress-fill {
            background: linear-gradient(90deg, #ffeb3b, #ffc400);
        }
        
        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            display: none;
            width: 85%;
            max-width: 350px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.8);
            border: 2px solid var(--primary-color);
            animation: popIn 0.3s ease;
        }
        
        @keyframes popIn {
            from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .message.active {
            display: block;
        }
        
        .back-button {
            margin-top: 25px;
            background: rgba(100, 100, 100, 0.7) !important;
        }
        
        .inventory-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 8px 0;
            background: rgba(50, 50, 50, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .inventory-item:hover {
            background: rgba(70, 70, 70, 0.8);
            transform: translateX(5px);
        }
        
        .rod-item {
            background: rgba(0, 70, 160, 0.3);
            border-left: 4px solid var(--secondary-color);
        }
        
        .fish-item {
            background: rgba(10, 100, 10, 0.3);
            border-left: 4px solid var(--success-color);
        }
        
        .premium-item {
            background: rgba(255, 215, 0, 0.2);
            border-left: 4px solid #ffd700;
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            background: var(--primary-color);
            color: black;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .badge.premium {
            background: #ffd700;
        }
        
        .badge.new {
            background: var(--danger-color);
            color: white;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .event-banner {
            background: linear-gradient(45deg, var(--christmas-color), #ff6b6b);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(255, 0, 0, 0.3);
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .achievement {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
        }
        
        .fishing-slot {
            background: rgba(0, 70, 160, 0.4);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .fishing-slot:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }
        
        .location-slot {
            background: rgba(0, 70, 160, 0.5);
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .location-slot:hover {
            background: rgba(0, 70, 160, 0.7);
            transform: scale(1.02);
        }
        
        .upgrade-option {
            background: rgba(50, 50, 50, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-color);
        }
        
        .timer {
            font-size: 12px;
            color: #ffeb3b;
            font-weight: bold;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            display: none;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .floating-coin {
            position: absolute;
            animation: float 1s ease-out;
            font-size: 20px;
            color: #ffd700;
            font-weight: bold;
            pointer-events: none;
        }
        
        @keyframes float {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        .shop-item {
            background: rgba(50, 50, 50, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-color);
        }
        
        .skill-item {
            background: rgba(0, 70, 160, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--secondary-color);
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- Th√¥ng b√°o n·ªïi -->
        <div id="notification" class="notification"></div>
        
        <!-- M√†n h√¨nh ch√≠nh -->
        <div id="main-menu" class="screen active">
            <h1>üé£ C·∫ÆM C√ÇU C√Å L√ìC üé£</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>‚≠ê C·∫•p: <span id="player-level">1</span></div>
                </div>
                <div class="stat-item">
                    <div>üí∞ Xu: <span id="player-coins">1500</span></div>
                </div>
                <div class="stat-item">
                    <div>‚ù§Ô∏è HP: <span id="player-hp">100</span>/100</div>
                </div>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>‚ö° NƒÉng l∆∞·ª£ng: <span id="player-energy">50</span>/50</div>
                </div>
                <div class="stat-item">
                    <div>üèÜ ƒêi·ªÉm: <span id="player-points">0</span></div>
                </div>
            </div>
            
            <!-- Banner s·ª± ki·ªán -->
            <div id="event-banner" class="event-banner" style="display: none;">
                üéâ S·ª∞ KI·ªÜN ƒêANG DI·ªÑN RA! üéâ
            </div>
            
            <button class="button blue" onclick="showScreen('character-screen')">
                üë§ TH√îNG TIN NH√ÇN V·∫¨T
            </button>
            <button class="button" onclick="showScreen('inventory-screen')">
                üéí T√öI ƒê·ªí & SHOP
            </button>
            <button class="button green" onclick="showScreen('select-location')">
                üéØ ƒêI C·∫ÆM C√ÇU
            </button>
            <button class="button red" onclick="showScreen('steal-menu')">
                üïµÔ∏è THƒÇM TR·ªòM C·∫¶N <span class="badge">-20 HP</span>
            </button>
            <button class="button market" onclick="showScreen('market-screen')">
                üè™ CH·ª¢ C√Å <span class="badge new">M·ªöI</span>
            </button>
            <button class="button christmas" onclick="showScreen('events-screen')">
                üéÑ S·ª∞ KI·ªÜN <span class="badge">HOT</span>
            </button>
            <button class="button premium" onclick="showScreen('achievements-screen')">
                üèÜ TH√ÄNH T·ª∞U
            </button>
        </div>
        
        <!-- M√†n h√¨nh th√¥ng tin nh√¢n v·∫≠t -->
        <div id="character-screen" class="screen">
            <h1>üë§ TH√îNG TIN NH√ÇN V·∫¨T</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>T√™n: <span id="char-name">Ng∆∞ Ph·ªß L√†ng Ch√†i</span></div>
                </div>
                <div class="stat-item">
                    <div>C·∫•p: <span id="char-level">1</span></div>
                </div>
                <div class="stat-item">
                    <div>Xu: <span id="char-coins">1500</span></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div>HP: <span id="char-hp">100</span>/100</div>
                <div class="progress-bar hp-bar">
                    <div class="progress-fill" id="char-hp-fill" style="width: 100%"></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div>EXP: <span id="char-exp">0</span>/<span id="char-exp-needed">100</span></div>
                <div class="progress-bar exp-bar">
                    <div class="progress-fill" id="char-exp-fill" style="width: 0%"></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div>‚ö° NƒÉng l∆∞·ª£ng: <span id="char-energy">50</span>/50</div>
                <div class="progress-bar energy-bar">
                    <div class="progress-fill" id="char-energy-fill" style="width: 100%"></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div>C√° ƒë√£ b·∫Øt: <span id="fish-caught">0</span> con (<span id="fish-weight">0.00</span> kg)</div>
                <div>C√° l·ªõn nh·∫•t: <span id="biggest-fish">0.00</span> kg</div>
            </div>
            
            <h3>üéØ K·ª∏ NƒÇNG</h3>
            <div class="skill-item">
                <div>üé£ K·ªπ nƒÉng c√¢u c√°: <span id="skill-fishing">1</span></div>
                <button class="button" onclick="upgradeSkill('fishing')">N√¢ng c·∫•p (100üí∞)</button>
            </div>
            <div class="skill-item">
                <div>üçÄ May m·∫Øn: <span id="skill-luck">1</span></div>
                <button class="button" onclick="upgradeSkill('luck')">N√¢ng c·∫•p (100üí∞)</button>
            </div>
            <div class="skill-item">
                <div>üí™ S·ª©c ch·ªãu ƒë·ª±ng: <span id="skill-endurance">1</span></div>
                <button class="button" onclick="upgradeSkill('endurance')">N√¢ng c·∫•p (100üí∞)</button>
            </div>
            
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh t√∫i ƒë·ªì -->
        <div id="inventory-screen" class="screen">
            <h1>üéí T√öI ƒê·ªí & SHOP</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>C·∫ßn c√¢u: <span id="inventory-rods-count">2</span>/<span id="inventory-max-rods">5</span></div>
                </div>
                <div class="stat-item">
                    <div>Xu: <span id="inventory-coins">1500</span></div>
                </div>
            </div>
            
            <h3>üé£ C·∫¶N C√ÇU C·ª¶A B·∫†N</h3>
            <div id="rods-container">
                <!-- C·∫ßn c√¢u s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
            </div>
            
            <h3>üêü C√Å TRONG KHO</h3>
            <div id="fish-container">
                <!-- C√° s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
            </div>
            
            <button class="button green" onclick="showScreen('shop-screen')">üõí C·ª¨A H√ÄNG</button>
            <button class="button red" onclick="showScreen('sell-fish-screen')">üí∞ B√ÅN C√Å</button>
            
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh c·ª≠a h√†ng -->
        <div id="shop-screen" class="screen">
            <h1>üõí C·ª¨A H√ÄNG</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>Xu hi·ªán t·∫°i: <span id="shop-coins">1500</span></div>
                </div>
            </div>
            
            <h3>üé£ C·∫¶N C√ÇU</h3>
            <div class="shop-item">
                <div><strong>C·∫ßn S·∫Øt</strong> - TƒÉng 20% t·ª∑ l·ªá b·∫Øt c√°</div>
                <div>Gi√°: 10,000üí∞</div>
                <button class="button" onclick="buyRod('iron')">MUA NGAY</button>
            </div>
            
            <div class="shop-item">
                <div><strong>C·∫ßn V√†ng</strong> - TƒÉng 50% t·ª∑ l·ªá b·∫Øt c√° <span class="badge premium">PREMIUM</span></div>
                <div>Gi√°: 50,000üí∞</div>
                <button class="button premium" onclick="buyRod('gold')">MUA NGAY</button>
            </div>
            
            <h3>‚ö° N√ÇNG C·∫§P</h3>
            <div class="shop-item">
                <div><strong>M·ªü r·ªông gi·ªõi h·∫°n c·∫ßn c√¢u</strong></div>
                <div>Hi·ªán t·∫°i: <span id="current-rod-limit">5</span> c·∫ßn</div>
                <div>Gi√°: 50,000üí∞</div>
                <button class="button blue" onclick="upgradeRodLimit()">N√ÇNG C·∫§P</button>
            </div>
            
            <button class="button back-button" onclick="showScreen('inventory-screen')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh b√°n c√° -->
        <div id="sell-fish-screen" class="screen">
            <h1>üí∞ B√ÅN C√Å</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>Xu hi·ªán t·∫°i: <span id="sell-coins">1500</span></div>
                </div>
                <div class="stat-item">
                    <div>T·ªïng gi√° tr·ªã: <span id="total-fish-value">0</span>üí∞</div>
                </div>
            </div>
            
            <div style="margin: 15px 0;">
                <div>Gi√° b√°n C√° L√≥c: 100üí∞/kg</div>
            </div>
            
            <div id="sell-fish-container">
                <!-- C√° ƒë·ªÉ b√°n s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->
            </div>
            
            <button class="button red" onclick="sellAllFish()">üí∞ B√ÅN T·∫§T C·∫¢ C√Å</button>
            
            <button class="button back-button" onclick="showScreen('inventory-screen')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh ch·ªçn khu v·ª±c -->
        <div id="select-location" class="screen">
            <h1>üéØ CH·ªåN KHU V·ª∞C C·∫ÆM C√ÇU</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>C·∫•p hi·ªán t·∫°i: <span id="location-level">1</span></div>
                </div>
            </div>
            
            <div class="location-slot active" onclick="selectLocation('Khu ƒê·ªìng L·ªõn')">
                <div><strong>Khu ƒê·ªìng L·ªõn</strong></div>
                <div>T·ª∑ l·ªá b·∫Øt c√°: 70%</div>
                <div>C√° th∆∞·ªùng: 0.5-3kg</div>
                <div>Y√™u c·∫ßu: C·∫•p 1</div>
            </div>
            
            <div class="location-slot inactive" onclick="selectLocation('Khu R·ª´ng Tr√†m')">
                <div><strong>Khu R·ª´ng Tr√†m</strong> <span class="badge new">M·ªöI</span></div>
                <div>T·ª∑ l·ªá b·∫Øt c√°: 50%</div>
                <div>C√° l·ªõn: 1-5kg</div>
                <div>Y√™u c·∫ßu: C·∫•p 7</div>
            </div>
            
            <div class="location-slot inactive" onclick="selectLocation('H·ªì Thi√™ng')">
                <div><strong>H·ªì Thi√™ng</strong> <span class="badge premium">PREMIUM</span></div>
                <div>T·ª∑ l·ªá b·∫Øt c√°: 30%</div>
                <div>C√° kh·ªïng l·ªì: 3-10kg</div>
                <div>Y√™u c·∫ßu: C·∫•p 15</div>
            </div>
            
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh ch·ªçn k√™nh -->
        <div id="select-channel" class="screen">
            <h1 id="channel-location">KHU V·ª∞C: Khu ƒê·ªìng L·ªõn</h1>
            <h2>üì° CH·ªåN K√äNH</h2>
            
            <div class="location-slot active" onclick="selectChannel('K√™nh A')">
                <div><strong>K√™nh A</strong></div>
                <div>ƒê√¥ng ng∆∞·ªùi c√¢u</div>
                <div>T·ª∑ l·ªá +5%</div>
            </div>
            
            <div class="location-slot active" onclick="selectChannel('K√™nh B')">
                <div><strong>K√™nh B</strong></div>
                <div>V·∫Øng v·∫ª</div>
                <div>C√° l·ªõn +10%</div>
            </div>
            
            <div class="location-slot active" onclick="selectChannel('K√™nh C')">
                <div><strong>K√™nh C</strong></div>
                <div>K√™nh cao c·∫•p</div>
                <div>EXP +15%</div>
            </div>
            
            <button class="button back-button" onclick="showScreen('select-location')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh c√¢u c√° -->
        <div id="fishing-screen" class="screen">
            <h1 id="fishing-location">Khu ƒê·ªìng L·ªõn - K√™nh A</h1>
            
            <div id="fishing-slots">
                <div class="fishing-slot">
                    <div style="font-weight: bold; margin-bottom: 10px;">üé£ √î C·∫ÆM C√ÇU 1</div>
                    <div id="slot-1-status">Tr·ªëng</div>
                    <button class="button" onclick="startFishing(0)">üé£ C·∫ÆM C√ÇU</button>
                </div>
                <div class="fishing-slot">
                    <div style="font-weight: bold; margin-bottom: 10px;">üé£ √î C·∫ÆM C√ÇU 2</div>
                    <div id="slot-2-status">Tr·ªëng</div>
                    <button class="button" onclick="startFishing(1)">üé£ C·∫ÆM C√ÇU</button>
                </div>
            </div>
            
            <div class="stats-bar" style="margin-top: 15px;">
                <div class="stat-item">
                    <div>C·∫ßn Tr·ªëng: <span id="free-rods">2</span>/<span id="fishing-max-rods">5</span></div>
                </div>
                <div class="stat-item">
                    <div>C√° ƒë√£ b·∫Øt: <span id="fishing-fish-count">0</span> con</div>
                </div>
            </div>
            
            <button class="button back-button" onclick="showScreen('select-channel')">‚Üê Quay L·∫°i K√™nh</button>
        </div>
        
        <!-- M√†n h√¨nh thƒÉm tr·ªôm -->
        <div id="steal-menu" class="screen">
            <h1>üïµÔ∏è THƒÇM TR·ªòM C·∫¶N</h1>
            
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 18px; margin-bottom: 15px;">H√†nh ƒë·ªông n√†y t·ªën 20 HP. B·∫°n c√≥ ch·∫Øc mu·ªën ƒëi lu√¥n kh√¥ng?</div>
                <div style="font-size: 16px;">HP hi·ªán t·∫°i: <span id="steal-hp">100</span>/100</div>
            </div>
            
            <button class="button red" onclick="startStealing()">üïµÔ∏è ƒêI LU√îN</button>
            <button class="button blue back-button" onclick="showScreen('main-menu')">ü§î SUY NGHƒ® L·∫†I</button>
        </div>
        
        <!-- M√†n h√¨nh ch·ª£ c√° -->
        <div id="market-screen" class="screen">
            <h1>üè™ CH·ª¢ C√Å</h1>
            <div style="text-align: center; margin: 20px 0;">
                <p>T√≠nh nƒÉng ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn...</p>
                <p>üë®‚Äçüíª S·∫Øp ra m·∫Øt!</p>
            </div>
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh s·ª± ki·ªán -->
        <div id="events-screen" class="screen">
            <h1>üéÑ S·ª∞ KI·ªÜN</h1>
            <div style="text-align: center; margin: 20px 0;">
                <p>T√≠nh nƒÉng ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn...</p>
                <p>üë®‚Äçüíª S·∫Øp ra m·∫Øt!</p>
            </div>
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- M√†n h√¨nh th√†nh t·ª±u -->
        <div id="achievements-screen" class="screen">
            <h1>üèÜ TH√ÄNH T·ª∞U</h1>
            <div style="text-align: center; margin: 20px 0;">
                <p>T√≠nh nƒÉng ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn...</p>
                <p>üë®‚Äçüíª S·∫Øp ra m·∫Øt!</p>
            </div>
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
    </div>
    
    <!-- Th√¥ng b√°o -->
    <div id="message" class="message">
        <div id="message-text">Th√¥ng b√°o</div>
    </div>

    <script>
        // ========== D·ªÆ LI·ªÜU TR√í CH∆†I N√ÇNG C·∫§P ==========
        let gameState = {
            currentScreen: "main-menu",
            currentLocation: null,
            currentChannel: null,
            lastFishingTime: 0,
            lastEnergyRegen: Date.now(),
            activeEvents: [],
            achievements: [],
            dailyRewards: {},
            fishingSlots: [
                { id: 0, status: "Tr·ªëng", rodId: null, endTime: 0 },
                { id: 1, status: "Tr·ªëng", rodId: null, endTime: 0 }
            ]
        };

        let playerData = {
            level: 1,
            exp: 0,
            coins: 1500,
            gems: 0,
            health: 100,
            maxHealth: 100,
            energy: 50,
            maxEnergy: 50,
            points: 0,
            fishInventory: [],
            rodsInventory: [
                { 
                    id: 1, 
                    name: "C·∫ßn Tre", 
                    level: 1, 
                    status: "Tr·ªëng",
                    rarity: "common",
                    speed: 1.0,
                    luck: 1.0,
                    type: "bamboo"
                },
                { 
                    id: 2, 
                    name: "C·∫ßn Tre", 
                    level: 1, 
                    status: "Tr·ªëng",
                    rarity: "common",
                    speed: 1.0,
                    luck: 1.0,
                    type: "bamboo"
                }
            ],
            itemsInventory: [],
            maxRods: 5,
            skills: {
                fishing: 1,
                luck: 1,
                endurance: 1
            },
            statistics: {
                totalFishCaught: 0,
                biggestFish: 0,
                totalEarnings: 0,
                playTime: 0
            }
        };

        // ========== T√çNH NƒÇNG M·ªöI ==========

        // H·ªá th·ªëng nƒÉng l∆∞·ª£ng
        function updateEnergy() {
            const now = Date.now();
            const timeDiff = now - gameState.lastEnergyRegen;
            const energyGain = Math.floor(timeDiff / 60000); // 1 energy m·ªói ph√∫t
            
            if (energyGain > 0) {
                playerData.energy = Math.min(playerData.maxEnergy, playerData.energy + energyGain);
                gameState.lastEnergyRegen = now;
                
                if (energyGain > 5) {
                    showNotification(`‚ö° H·ªìi ph·ª•c ${energyGain} nƒÉng l∆∞·ª£ng!`);
                }
            }
        }

        // H·ªá th·ªëng s·ª± ki·ªán
        const events = {
            doubleExp: {
                name: "Double EXP",
                description: "Nh·∫≠n g·∫•p ƒë√¥i kinh nghi·ªám",
                active: false,
                multiplier: 2.0
            },
            luckyDay: {
                name: "Ng√†y May M·∫Øn",
                description: "TƒÉng 50% t·ª∑ l·ªá b·∫Øt c√° hi·∫øm",
                active: false,
                multiplier: 1.5
            }
        };

        // H·ªá th·ªëng th√†nh t·ª±u
        const achievementsList = [
            { id: 1, name: "Ng∆∞ ph·ªß m·ªõi", description: "B·∫Øt con c√° ƒë·∫ßu ti√™n", reward: 100, completed: false },
            { id: 2, name: "Chuy√™n gia c√¢u c√°", description: "B·∫Øt 100 con c√°", reward: 500, completed: false },
            { id: 3, name: "T·ª∑ ph√∫", description: "Ki·∫øm 10,000 xu", reward: 1000, completed: false }
        ];

        // ========== H√ÄM N√ÇNG C·∫§P ==========

        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }

        function createFloatingCoin(amount, element) {
            const rect = element.getBoundingClientRect();
            const floatingCoin = document.createElement('div');
            floatingCoin.className = 'floating-coin';
            floatingCoin.textContent = `+${amount}üí∞`;
            floatingCoin.style.left = (rect.left + rect.width/2) + 'px';
            floatingCoin.style.top = rect.top + 'px';
            
            document.body.appendChild(floatingCoin);
            
            setTimeout(() => {
                floatingCoin.remove();
            }, 1000);
        }

        // H·ªá th·ªëng c√¢u c√° c·∫£i ti·∫øn
        function startFishing(slotIndex) {
            if (playerData.energy < 10) {
                showNotification("‚ö†Ô∏è Kh√¥ng ƒë·ªß nƒÉng l∆∞·ª£ng!");
                return;
            }

            const freeRod = playerData.rodsInventory.find(rod => rod.status === "Tr·ªëng");
            if (!freeRod) {
                showNotification("üé£ Kh√¥ng c√≥ c·∫ßn c√¢u tr·ªëng!");
                return;
            }

            playerData.energy -= 10;
            freeRod.status = "ƒêang c√¢u";
            gameState.fishingSlots[slotIndex].status = "ƒêang c√¢u";
            gameState.fishingSlots[slotIndex].rodId = freeRod.id;
            gameState.fishingSlots[slotIndex].endTime = Date.now() + 5000; // 5 gi√¢y

            showNotification("üé£ ƒê√£ th·∫£ c·∫ßn... ƒëang ch·ªù c√° c·∫Øn c√¢u!", 2);
            updateUI();

            // M√¥ ph·ªèng th·ªùi gian c√¢u c√°
            setTimeout(() => {
                finishFishing(slotIndex, freeRod);
            }, 5000);
        }

        function finishFishing(slotIndex, rod) {
            // T√≠nh to√°n t·ª∑ l·ªá th√†nh c√¥ng
            const baseSuccessRate = 0.7;
            const levelBonus = playerData.level * 0.02;
            const skillBonus = playerData.skills.fishing * 0.05;
            const rodBonus = rod.luck;
            
            const successRate = Math.min(0.95, baseSuccessRate + levelBonus + skillBonus + rodBonus);
            
            if (Math.random() < successRate) {
                // T√≠nh tr·ªçng l∆∞·ª£ng c√°
                const baseWeight = 0.5;
                const randomFactor = Math.random() * 3;
                const luckBonus = playerData.skills.luck * 0.1;
                const weight = baseWeight + randomFactor + luckBonus;
                
                // T√≠nh EXP
                let expGained = Math.floor(weight * 20);
                
                // √Åp d·ª•ng s·ª± ki·ªán double EXP
                if (events.doubleExp.active) {
                    expGained *= events.doubleExp.multiplier;
                }
                
                // Th√™m c√° v√†o kho
                const fish = {
                    name: "C√° L√≥c",
                    weight: parseFloat(weight.toFixed(2)),
                    exp: expGained,
                    value: Math.floor(weight * 100),
                    rarity: weight > 3 ? "rare" : "common"
                };
                
                playerData.fishInventory.push(fish);
                
                // Th√™m EXP v√† ki·ªÉm tra level up
                playerData.exp += expGained;
                checkLevelUp();
                
                // C·∫≠p nh·∫≠t th·ªëng k√™
                playerData.statistics.totalFishCaught++;
                if (weight > playerData.statistics.biggestFish) {
                    playerData.statistics.biggestFish = weight;
                }
                
                // Th√¥ng b√°o th√†nh c√¥ng
                const rarityText = weight > 3 ? " üéâ HI·∫æM!" : "";
                showNotification(`üé£ B·∫Øt ƒë∆∞·ª£c c√° L√≥c ${weight.toFixed(2)}kg! +${expGained} EXP${rarityText}`);
                
            } else {
                showNotification("üí® C√° tho√°t m·∫•t r·ªìi!");
            }
            
            // Reset tr·∫°ng th√°i
            rod.status = "Tr·ªëng";
            gameState.fishingSlots[slotIndex].status = "Tr·ªëng";
            gameState.fishingSlots[slotIndex].rodId = null;
            
            updateUI();
        }

        // H·ªá th·ªëng n√¢ng c·∫•p skill
        function upgradeSkill(skill) {
            const upgradeCost = playerData.skills[skill] * 100;
            
            if (playerData.coins >= upgradeCost) {
                playerData.coins -= upgradeCost;
                playerData.skills[skill]++;
                showNotification(`‚≠ê N√¢ng c·∫•p ${skill} th√†nh c√¥ng!`);
                updateUI();
            } else {
                showNotification(`üí∞ C·∫ßn ${upgradeCost} xu ƒë·ªÉ n√¢ng c·∫•p`);
            }
        }

        // H·ªá th·ªëng mua c·∫ßn c√¢u
        function buyRod(type) {
            let cost, rod;
            
            switch(type) {
                case 'iron':
                    cost = 10000;
                    rod = {
                        id: playerData.rodsInventory.length + 1,
                        name: "C·∫ßn S·∫Øt",
                        level: 1,
                        status: "Tr·ªëng",
                        rarity: "uncommon",
                        speed: 1.2,
                        luck: 1.2,
                        type: "iron"
                    };
                    break;
                case 'gold':
                    cost = 50000;
                    rod = {
                        id: playerData.rodsInventory.length + 1,
                        name: "C·∫ßn V√†ng",
                        level: 1,
                        status: "Tr·ªëng",
                        rarity: "rare",
                        speed: 1.5,
                        luck: 1.5,
                        type: "gold"
                    };
                    break;
                default:
                    return;
            }
            
            if (playerData.coins >= cost) {
                if (playerData.rodsInventory.length < playerData.maxRods) {
                    playerData.coins -= cost;
                    playerData.rodsInventory.push(rod);
                    showNotification(`üé£ Mua ${rod.name} th√†nh c√¥ng!`);
                } else {
                    showNotification("üé£ ƒê√£ ƒë·∫°t gi·ªõi h·∫°n s·ªë l∆∞·ª£ng c·∫ßn c√¢u!");
                }
            } else {
                showNotification(`üí∞ Kh√¥ng ƒë·ªß xu! C·∫ßn ${cost.toLocaleString()}üí∞`);
            }
            updateUI();
        }

        // N√¢ng c·∫•p gi·ªõi h·∫°n c·∫ßn c√¢u
        function upgradeRodLimit() {
            const cost = 50000;
            if (playerData.coins >= cost && playerData.maxRods < 10) {
                playerData.coins -= cost;
                playerData.maxRods++;
                showNotification(`üé£ N√¢ng c·∫•p th√†nh c√¥ng! Gi·ªõi h·∫°n: ${playerData.maxRods} c·∫ßn`);
            } else if (playerData.maxRods >= 10) {
                showNotification("üé£ ƒê√£ ƒë·∫°t gi·ªõi h·∫°n t·ªëi ƒëa!");
            } else {
                showNotification(`üí∞ Kh√¥ng ƒë·ªß xu! C·∫ßn ${cost.toLocaleString()}üí∞`);
            }
            updateUI();
        }

        // H·ªá th·ªëng b√°n c√°
        function sellAllFish() {
            if (playerData.fishInventory.length === 0) {
                showNotification("üêü Kh√¥ng c√≥ c√° ƒë·ªÉ b√°n!");
                return;
            }
            
            const totalValue = playerData.fishInventory.reduce((sum, fish) => sum + fish.value, 0);
            playerData.coins += totalValue;
            playerData.statistics.totalEarnings += totalValue;
            
            showNotification(`üí∞ B√°n th√†nh c√¥ng ${playerData.fishInventory.length} con c√°! +${totalValue}üí∞`);
            
            playerData.fishInventory = [];
            updateUI();
        }

        // H·ªá th·ªëng thƒÉm tr·ªôm
        function startStealing() {
            if (playerData.health >= 20) {
                playerData.health -= 20;
                
                // 50% c∆° h·ªôi b·∫Øt ƒë∆∞·ª£c c√°
                if (Math.random() > 0.5) {
                    const weight = (Math.random() * 2 + 0.5).toFixed(2);
                    const value = Math.floor(weight * 80); // Gi√° th·∫•p h∆°n
                    
                    playerData.fishInventory.push({
                        name: "C√° Tr·ªôm",
                        weight: parseFloat(weight),
                        exp: Math.floor(weight * 15),
                        value: value,
                        rarity: "stolen"
                    });
                    
                    showNotification(`üïµÔ∏è Tr·ªôm th√†nh c√¥ng! B·∫Øt ƒë∆∞·ª£c c√° ${weight}kg! +${value}üí∞`);
                } else {
                    showNotification("üïµÔ∏è Tr·ªôm th·∫•t b·∫°i! B·ªã ph√°t hi·ªán!");
                }
                
                showScreen("main-menu");
            } else {
                showNotification("‚ö†Ô∏è Kh√¥ng ƒë·ªß HP ƒë·ªÉ thƒÉm tr·ªôm!");
            }
        }

        // Ch·ªçn khu v·ª±c v√† k√™nh
        function selectLocation(location) {
            if (location === "Khu ƒê·ªìng L·ªõn" || playerData.level >= 7) {
                gameState.currentLocation = location;
                document.getElementById("channel-location").textContent = `KHU V·ª∞C: ${location}`;
                showScreen("select-channel");
            } else {
                showNotification("üîí C·∫ßn ƒë·∫°t c·∫•p 7 ƒë·ªÉ m·ªü kh√≥a khu v·ª±c n√†y!");
            }
        }

        function selectChannel(channel) {
            gameState.currentChannel = channel;
            document.getElementById("fishing-location").textContent = `${gameState.currentLocation} - ${channel}`;
            showScreen("fishing-screen");
        }

        // Ki·ªÉm tra level up
        function checkLevelUp() {
            const expNeeded = calculateExpNeeded();
            if (playerData.exp >= expNeeded) {
                playerData.level++;
                playerData.exp -= expNeeded;
                playerData.maxHealth += 10;
                playerData.health = playerData.maxHealth;
                playerData.maxEnergy += 5;
                playerData.energy = playerData.maxEnergy;
                
                showNotification(`üéâ CH√öC M·ª™NG! L√äN C·∫§P ${playerData.level}!`);
            }
        }

        function calculateExpNeeded() {
            return Math.floor(100 * Math.pow(playerData.level, 1.5));
        }

        // ========== H√ÄM HI·ªÇN TH·ªä TH√îNG B√ÅO ==========
        function displayMessage(text, duration = 3000) {
            const messageElement = document.getElementById("message");
            const messageText = document.getElementById("message-text");
            
            messageText.innerHTML = text;
            messageElement.classList.add("active");
            
            setTimeout(() => {
                messageElement.classList.remove("active");
            }, duration);
        }

        // ========== H√ÄM CHUY·ªÇN M√ÄN H√åNH ==========
        function showScreen(screenId) {
            // ·∫®n t·∫•t c·∫£ m√†n h√¨nh
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Hi·ªÉn th·ªã m√†n h√¨nh ƒë∆∞·ª£c ch·ªçn
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
                gameState.currentScreen = screenId;
            }
            
            // C·∫≠p nh·∫≠t UI
            updateUI();
        }

        // ========== H√ÄM C·∫¨P NH·∫¨T GIAO DI·ªÜN ==========
        function updateUI() {
            // C·∫≠p nh·∫≠t nƒÉng l∆∞·ª£ng
            updateEnergy();
            
            // C·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi ch∆°i ch√≠nh
            document.getElementById("player-level").textContent = playerData.level;
            document.getElementById("player-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("player-hp").textContent = playerData.health;
            document.getElementById("player-energy").textContent = playerData.energy;
            document.getElementById("player-points").textContent = playerData.points;
            
            // C·∫≠p nh·∫≠t m√†n h√¨nh th√¥ng tin nh√¢n v·∫≠t
            document.getElementById("char-level").textContent = playerData.level;
            document.getElementById("char-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("char-hp").textContent = playerData.health;
            document.getElementById("char-energy").textContent = playerData.energy;
            document.getElementById("steal-hp").textContent = playerData.health;
            document.getElementById("location-level").textContent = playerData.level;
            
            // C·∫≠p nh·∫≠t thanh HP v√† Energy
            const hpPercent = (playerData.health / playerData.maxHealth) * 100;
            document.getElementById("char-hp-fill").style.width = `${hpPercent}%`;
            
            const energyPercent = (playerData.energy / playerData.maxEnergy) * 100;
            document.getElementById("char-energy-fill").style.width = `${energyPercent}%`;
            
            // C·∫≠p nh·∫≠t thanh EXP
            const expNeeded = calculateExpNeeded();
            const expPercent = (playerData.exp / expNeeded) * 100;
            document.getElementById("char-exp").textContent = playerData.exp.toLocaleString();
            document.getElementById("char-exp-needed").textContent = expNeeded.toLocaleString();
            document.getElementById("char-exp-fill").style.width = `${expPercent}%`;
            
            // C·∫≠p nh·∫≠t th√¥ng tin c√°
            const fishCount = playerData.fishInventory.length;
            const fishWeight = playerData.fishInventory.reduce((sum, fish) => sum + fish.weight, 0);
            document.getElementById("fish-caught").textContent = fishCount;
            document.getElementById("fish-weight").textContent = fishWeight.toFixed(2);
            document.getElementById("fishing-fish-count").textContent = fishCount;
            document.getElementById("biggest-fish").textContent = playerData.statistics.biggestFish.toFixed(2);
            
            // C·∫≠p nh·∫≠t k·ªπ nƒÉng
            document.getElementById("skill-fishing").textContent = playerData.skills.fishing;
            document.getElementById("skill-luck").textContent = playerData.skills.luck;
            document.getElementById("skill-endurance").textContent = playerData.skills.endurance;
            
            // C·∫≠p nh·∫≠t th√¥ng tin c·∫ßn c√¢u
            const freeRods = playerData.rodsInventory.filter(r => r.status === "Tr·ªëng").length;
            document.getElementById("inventory-rods-count").textContent = playerData.rodsInventory.length;
            document.getElementById("inventory-max-rods").textContent = playerData.maxRods;
            document.getElementById("free-rods").textContent = freeRods;
            document.getElementById("fishing-max-rods").textContent = playerData.maxRods;
            document.getElementById("current-rod-limit").textContent = playerData.maxRods;
            
            // C·∫≠p nh·∫≠t c·ª≠a h√†ng
            document.getElementById("shop-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("inventory-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("sell-coins").textContent = playerData.coins.toLocaleString();
            
            // C·∫≠p nh·∫≠t t·ªïng gi√° tr·ªã c√°
            const totalFishValue = playerData.fishInventory.reduce((sum, fish) => sum + fish.value, 0);
            document.getElementById("total-fish-value").textContent = totalFishValue.toLocaleString();
            
            // C·∫≠p nh·∫≠t danh s√°ch c·∫ßn c√¢u
            updateRodsList();
            
            // C·∫≠p nh·∫≠t danh s√°ch c√°
            updateFishList();
            
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i √¥ c√¢u c√°
            updateFishingSlots();
            
            // Ki·ªÉm tra v√† k√≠ch ho·∫°t s·ª± ki·ªán ng·∫´u nhi√™n
            checkRandomEvents();
        }

        function updateRodsList() {
            const rodsContainer = document.getElementById("rods-container");
            if (rodsContainer) {
                rodsContainer.innerHTML = '';
                
                playerData.rodsInventory.forEach(rod => {
                    const rodElement = document.createElement("div");
                    rodElement.className = "inventory-item rod-item";
                    
                    let rarityBadge = "";
                    if (rod.rarity === "uncommon") rarityBadge = '<span class="badge">UNCOMMON</span>';
                    if (rod.rarity === "rare") rarityBadge = '<span class="badge premium">RARE</span>';
                    
                    rodElement.innerHTML = `
                        <div>
                            <strong>${rod.name}</strong> ${rarityBadge}
                            <div style="font-size: 12px; color: #ccc;">
                                Level ${rod.level} | May m·∫Øn: +${Math.floor((rod.luck-1)*100)}%
                            </div>
                        </div>
                        <div>
                            ${rod.status}
                        </div>
                    `;
                    
                    rodsContainer.appendChild(rodElement);
                });
            }
        }

        function updateFishList() {
            const fishContainer = document.getElementById("fish-container");
            const sellFishContainer = document.getElementById("sell-fish-container");
            
            if (fishContainer) {
                fishContainer.innerHTML = '';
                
                if (playerData.fishInventory.length === 0) {
                    fishContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #ccc;">Ch∆∞a c√≥ c√° trong kho</div>';
                } else {
                    playerData.fishInventory.forEach((fish, index) => {
                        const fishElement = document.createElement("div");
                        fishElement.className = "inventory-item fish-item";
                        
                        let rarityText = "";
                        if (fish.rarity === "rare") rarityText = '<span class="badge new">HI·∫æM</span>';
                        if (fish.rarity === "stolen") rarityText = '<span class="badge">TR·ªòM</span>';
                        
                        fishElement.innerHTML = `
                            <div>
                                <strong>${fish.name}</strong> ${rarityText}
                                <div style="font-size: 12px; color: #ccc;">
                                    ${fish.weight} kg | Gi√°: ${fish.value}üí∞
                                </div>
                            </div>
                        `;
                        
                        fishContainer.appendChild(fishElement);
                    });
                }
            }
            
            if (sellFishContainer) {
                sellFishContainer.innerHTML = '';
                
                if (playerData.fishInventory.length === 0) {
                    sellFishContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #ccc;">Kh√¥ng c√≥ c√° ƒë·ªÉ b√°n</div>';
                } else {
                    const totalWeight = playerData.fishInventory.reduce((sum, fish) => sum + fish.weight, 0);
                    const totalValue = playerData.fishInventory.reduce((sum, fish) => sum + fish.value, 0);
                    
                    sellFishContainer.innerHTML = `
                        <div class="inventory-item">
                            <div>
                                <strong>T·ªïng c·ªông</strong>
                                <div style="font-size: 12px; color: #ccc;">
                                    ${playerData.fishInventory.length} con c√° | ${totalWeight.toFixed(2)} kg
                                </div>
                            </div>
                            <div>
                                <strong>${totalValue}üí∞</strong>
                            </div>
                        </div>
                    `;
                }
            }
        }

        function updateFishingSlots() {
            gameState.fishingSlots.forEach((slot, index) => {
                const slotElement = document.getElementById(`slot-${index+1}-status`);
                if (slotElement) {
                    if (slot.status === "ƒêang c√¢u") {
                        const timeLeft = Math.ceil((slot.endTime - Date.now()) / 1000);
                        if (timeLeft > 0) {
                            slotElement.innerHTML = `ƒêang c√¢u... <span class="timer">${timeLeft}s</span>`;
                        } else {
                            slotElement.textContent = "Tr·ªëng";
                        }
                    } else {
                        slotElement.textContent = "Tr·ªëng";
                    }
                }
            });
        }

        function checkRandomEvents() {
            // 5% c∆° h·ªôi k√≠ch ho·∫°t s·ª± ki·ªán m·ªói l·∫ßn update
            if (Math.random() < 0.05 && gameState.activeEvents.length === 0) {
                const eventKeys = Object.keys(events);
                const randomEvent = eventKeys[Math.floor(Math.random() * eventKeys.length)];
                
                events[randomEvent].active = true;
                gameState.activeEvents.push(randomEvent);
                
                // Hi·ªÉn th·ªã banner s·ª± ki·ªán
                const eventBanner = document.getElementById('event-banner');
                eventBanner.textContent = `üéâ ${events[randomEvent].name}: ${events[randomEvent].description}`;
                eventBanner.style.display = 'block';
                
                showNotification(`üéâ S·ª± ki·ªán ${events[randomEvent].name} ƒë√£ b·∫Øt ƒë·∫ßu!`);
                
                // T·ª± ƒë·ªông t·∫Øt s·ª± ki·ªán sau 5 ph√∫t
                setTimeout(() => {
                    events[randomEvent].active = false;
                    gameState.activeEvents = gameState.activeEvents.filter(e => e !== randomEvent);
                    eventBanner.style.display = 'none';
                    showNotification(`‚è∞ S·ª± ki·ªán ${events[randomEvent].name} ƒë√£ k·∫øt th√∫c`);
                }, 300000); // 5 ph√∫t
            }
        }

        // ========== KH·ªûI T·∫†O GAME ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üéÆ Game C·∫Øm C√¢u C√° L√≥c Ho√†n Ch·ªânh ƒë√£ kh·ªüi ƒë·ªông!");
            updateUI();
            
            // Hi·ªÉn th·ªã th√¥ng b√°o ch√†o m·ª´ng
            setTimeout(() => {
                showNotification("üé£ Ch√†o m·ª´ng ƒë·∫øn v·ªõi C·∫Øm C√¢u C√° L√≥c Premium!");
            }, 1000);
            
            // Auto-save m·ªói 30 gi√¢y
            setInterval(saveGame, 30000);
            
            // Auto-update UI m·ªói gi√¢y
            setInterval(updateUI, 1000);
            
            // C·∫≠p nh·∫≠t fishing slots m·ªói gi√¢y
            setInterval(updateFishingSlots, 1000);
        });

        // H·ªá th·ªëng l∆∞u game
        function saveGame() {
            const saveData = {
                playerData: playerData,
                gameState: gameState,
                timestamp: Date.now()
            };
            localStorage.setItem('fishingGameComplete', JSON.stringify(saveData));
        }

        function loadGame() {
            const saved = localStorage.getItem('fishingGameComplete');
            if (saved) {
                const saveData = JSON.parse(saved);
                playerData = { ...playerData, ...saveData.playerData };
                gameState = { ...gameState, ...saveData.gameState };
                showNotification("üîÑ ƒê√£ t·∫£i game th√†nh c√¥ng!");
                updateUI();
            }
        }

        // Th√™m h√†m to√†n c·ª•c ƒë·ªÉ debug
        window.debugGame = function() {
            console.log("=== üéÆ DEBUG GAME ===");
            console.log("Player Data:", playerData);
            console.log("Game State:", gameState);
            console.log("Active Events:", gameState.activeEvents);
        }

        // T·ª± ƒë·ªông load game khi kh·ªüi ƒë·ªông
        loadGame();
    </script>
</body>
</html>