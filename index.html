<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>C·∫Øm C√¢u C√° L√≥c - Phi√™n b·∫£n N√¢ng c·∫•p</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Arial', sans-serif;
        }
        
        :root {
            --primary-color: #ffc800;
            --secondary-color: #0046a0;
            --danger-color: #c80000;
            --success-color: #0a640a;
            --warning-color: #b4b400;
            --christmas-color: #ff0000;
        }
        
        body {
            background: linear-gradient(135deg, #0a640a, #1e7c1e, #2a8a2a);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            padding: 10px;
        }
        
        #game-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
            min-height: 90vh;
            position: relative;
            overflow: hidden;
        }
        
        #game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--success-color));
            z-index: 10;
        }
        
        .screen {
            display: none;
            width: 100%;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block !important;
        }
        
        h1, h2, h3 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            font-size: 24px;
            background: linear-gradient(45deg, var(--primary-color), #ffeb3b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(50, 50, 50, 0.9);
            padding: 15px;
            border-radius: 15px;
            font-size: 14px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .stat-item::after {
            content: '';
            position: absolute;
            right: 0;
            top: 10%;
            height: 80%;
            width: 1px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .stat-item:last-child::after {
            display: none;
        }
        
        .button {
            display: block;
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            background: var(--primary-color);
            color: black;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .button:hover::before {
            left: 100%;
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }
        
        .button:active {
            transform: translateY(0);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .button.red {
            background: linear-gradient(45deg, var(--danger-color), #ff4444);
            color: white;
        }
        
        .button.blue {
            background: linear-gradient(45deg, var(--secondary-color), #0066cc);
            color: white;
        }
        
        .button.green {
            background: linear-gradient(45deg, var(--success-color), #2a8a2a);
            color: white;
        }
        
        .button.market {
            background: linear-gradient(45deg, var(--warning-color), #d4d400);
            color: white;
        }
        
        .button.christmas {
            background: linear-gradient(45deg, var(--christmas-color), #ff4444);
            color: white;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--christmas-color); }
            50% { box-shadow: 0 0 20px var(--christmas-color); }
        }
        
        .button.premium {
            background: linear-gradient(45deg, #ffd700, #ff6b00);
            color: black;
            border: 2px solid #ffd700;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(100, 100, 100, 0.5);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .hp-bar .progress-fill {
            background: linear-gradient(90deg, #ff0000, #ff6b6b);
        }
        
        .exp-bar .progress-fill {
            background: linear-gradient(90deg, #00ffff, #00b3b3);
        }
        
        .energy-bar .progress-fill {
            background: linear-gradient(90deg, #ffeb3b, #ffc400);
        }
        
        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            display: none;
            width: 85%;
            max-width: 350px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.8);
            border: 2px solid var(--primary-color);
            animation: popIn 0.3s ease;
        }
        
        @keyframes popIn {
            from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .message.active {
            display: block;
        }
        
        .back-button {
            margin-top: 25px;
            background: rgba(100, 100, 100, 0.7) !important;
        }
        
        .inventory-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 8px 0;
            background: rgba(50, 50, 50, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .inventory-item:hover {
            background: rgba(70, 70, 70, 0.8);
            transform: translateX(5px);
        }
        
        .rod-item {
            background: rgba(0, 70, 160, 0.3);
            border-left: 4px solid var(--secondary-color);
        }
        
        .fish-item {
            background: rgba(10, 100, 10, 0.3);
            border-left: 4px solid var(--success-color);
        }
        
        .premium-item {
            background: rgba(255, 215, 0, 0.2);
            border-left: 4px solid #ffd700;
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            background: var(--primary-color);
            color: black;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .badge.premium {
            background: #ffd700;
        }
        
        .badge.new {
            background: var(--danger-color);
            color: white;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .event-banner {
            background: linear-gradient(45deg, var(--christmas-color), #ff6b6b);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(255, 0, 0, 0.3);
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .achievement {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
        }
        
        .fishing-slot {
            background: rgba(0, 70, 160, 0.4);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .fishing-slot:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }
        
        .location-slot {
            background: rgba(0, 70, 160, 0.5);
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .location-slot:hover {
            background: rgba(0, 70, 160, 0.7);
            transform: scale(1.02);
        }
        
        .upgrade-option {
            background: rgba(50, 50, 50, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-color);
        }
        
        .timer {
            font-size: 12px;
            color: #ffeb3b;
            font-weight: bold;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            display: none;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .floating-coin {
            position: absolute;
            animation: float 1s ease-out;
            font-size: 20px;
            color: #ffd700;
            font-weight: bold;
            pointer-events: none;
        }
        
        @keyframes float {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- Th√¥ng b√°o n·ªïi -->
        <div id="notification" class="notification"></div>
        
        <!-- M√†n h√¨nh ch√≠nh -->
        <div id="main-menu" class="screen active">
            <h1>üé£ C·∫ÆM C√ÇU C√Å L√ìC üé£</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>‚≠ê C·∫•p: <span id="player-level">1</span></div>
                </div>
                <div class="stat-item">
                    <div>üí∞ Xu: <span id="player-coins">1500</span></div>
                </div>
                <div class="stat-item">
                    <div>‚ù§Ô∏è HP: <span id="player-hp">100</span>/100</div>
                </div>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>‚ö° NƒÉng l∆∞·ª£ng: <span id="player-energy">50</span>/50</div>
                </div>
                <div class="stat-item">
                    <div>üèÜ ƒêi·ªÉm: <span id="player-points">0</span></div>
                </div>
            </div>
            
            <!-- Banner s·ª± ki·ªán -->
            <div id="event-banner" class="event-banner" style="display: none;">
                üéâ S·ª∞ KI·ªÜN ƒêANG DI·ªÑN RA! üéâ
            </div>
            
            <button class="button blue" onclick="showScreen('character-screen')">
                üë§ TH√îNG TIN NH√ÇN V·∫¨T
            </button>
            <button class="button" onclick="showScreen('inventory-screen')">
                üéí T√öI ƒê·ªí & SHOP
            </button>
            <button class="button green" onclick="showScreen('select-location')">
                üéØ ƒêI C·∫ÆM C√ÇU
            </button>
            <button class="button red" onclick="showScreen('steal-menu')">
                üïµÔ∏è THƒÇM TR·ªòM C·∫¶N <span class="badge">-20 HP</span>
            </button>
            <button class="button market" onclick="showScreen('market-screen')">
                üè™ CH·ª¢ C√Å <span class="badge new">M·ªöI</span>
            </button>
            <button class="button christmas" onclick="showScreen('events-screen')">
                üéÑ S·ª∞ KI·ªÜN <span class="badge">HOT</span>
            </button>
            <button class="button premium" onclick="showScreen('achievements-screen')">
                üèÜ TH√ÄNH T·ª∞U
            </button>
        </div>
        
        <!-- C√°c m√†n h√¨nh kh√°c s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
        <div id="character-screen" class="screen">
            <h1>üë§ TH√îNG TIN NH√ÇN V·∫¨T</h1>
            <!-- N·ªôi dung m√†n h√¨nh th√¥ng tin nh√¢n v·∫≠t -->
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
        
        <div id="inventory-screen" class="screen">
            <h1>üéí T√öI ƒê·ªí & SHOP</h1>
            <!-- N·ªôi dung m√†n h√¨nh t√∫i ƒë·ªì -->
            <button class="button back-button" onclick="showScreen('main-menu')">‚Üê Quay L·∫°i</button>
        </div>
        
        <!-- Th√™m c√°c m√†n h√¨nh kh√°c t∆∞∆°ng t·ª± -->
    </div>
    
    <!-- Th√¥ng b√°o -->
    <div id="message" class="message">
        <div id="message-text">Th√¥ng b√°o</div>
    </div>

    <script>
        // ========== D·ªÆ LI·ªÜU TR√í CH∆†I N√ÇNG C·∫§P ==========
        let gameState = {
            currentScreen: "main-menu",
            currentLocation: null,
            currentChannel: null,
            lastFishingTime: 0,
            lastEnergyRegen: Date.now(),
            activeEvents: [],
            achievements: [],
            dailyRewards: {}
        };

        let playerData = {
            level: 1,
            exp: 0,
            coins: 1500,
            gems: 0,
            health: 100,
            maxHealth: 100,
            energy: 50,
            maxEnergy: 50,
            points: 0,
            fishInventory: [],
            rodsInventory: [
                { 
                    id: 1, 
                    name: "C·∫ßn Tre", 
                    level: 1, 
                    status: "Tr·ªëng",
                    rarity: "common",
                    speed: 1.0,
                    luck: 1.0
                },
                { 
                    id: 2, 
                    name: "C·∫ßn Tre", 
                    level: 1, 
                    status: "Tr·ªëng",
                    rarity: "common",
                    speed: 1.0,
                    luck: 1.0
                }
            ],
            itemsInventory: [],
            maxRods: 5,
            skills: {
                fishing: 1,
                luck: 1,
                endurance: 1
            },
            statistics: {
                totalFishCaught: 0,
                biggestFish: 0,
                totalEarnings: 0,
                playTime: 0
            }
        };

        // ========== T√çNH NƒÇNG M·ªöI ==========

        // H·ªá th·ªëng nƒÉng l∆∞·ª£ng
        function updateEnergy() {
            const now = Date.now();
            const timeDiff = now - gameState.lastEnergyRegen;
            const energyGain = Math.floor(timeDiff / 60000); // 1 energy m·ªói ph√∫t
            
            if (energyGain > 0) {
                playerData.energy = Math.min(playerData.maxEnergy, playerData.energy + energyGain);
                gameState.lastEnergyRegen = now;
                
                if (energyGain > 5) {
                    showNotification(`‚ö° H·ªìi ph·ª•c ${energyGain} nƒÉng l∆∞·ª£ng!`);
                }
            }
        }

        // H·ªá th·ªëng s·ª± ki·ªán
        const events = {
            doubleExp: {
                name: "Double EXP",
                description: "Nh·∫≠n g·∫•p ƒë√¥i kinh nghi·ªám",
                active: false,
                multiplier: 2.0
            },
            luckyDay: {
                name: "Ng√†y May M·∫Øn",
                description: "TƒÉng 50% t·ª∑ l·ªá b·∫Øt c√° hi·∫øm",
                active: false,
                multiplier: 1.5
            }
        };

        // H·ªá th·ªëng th√†nh t·ª±u
        const achievementsList = [
            { id: 1, name: "Ng∆∞ ph·ªß m·ªõi", description: "B·∫Øt con c√° ƒë·∫ßu ti√™n", reward: 100, completed: false },
            { id: 2, name: "Chuy√™n gia c√¢u c√°", description: "B·∫Øt 100 con c√°", reward: 500, completed: false },
            { id: 3, name: "T·ª∑ ph√∫", description: "Ki·∫øm 10,000 xu", reward: 1000, completed: false }
        ];

        // ========== H√ÄM N√ÇNG C·∫§P ==========

        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }

        function createFloatingCoin(amount, element) {
            const rect = element.getBoundingClientRect();
            const floatingCoin = document.createElement('div');
            floatingCoin.className = 'floating-coin';
            floatingCoin.textContent = `+${amount}üí∞`;
            floatingCoin.style.left = rect.left + 'px';
            floatingCoin.style.top = rect.top + 'px';
            
            document.body.appendChild(floatingCoin);
            
            setTimeout(() => {
                floatingCoin.remove();
            }, 1000);
        }

        // H·ªá th·ªëng c√¢u c√° c·∫£i ti·∫øn
        function advancedFishing() {
            if (playerData.energy < 10) {
                showNotification("‚ö†Ô∏è Kh√¥ng ƒë·ªß nƒÉng l∆∞·ª£ng!");
                return;
            }

            playerData.energy -= 10;
            
            // T√≠nh to√°n t·ª∑ l·ªá th√†nh c√¥ng d·ª±a tr√™n level v√† skill
            const baseSuccessRate = 0.7;
            const levelBonus = playerData.level * 0.02;
            const skillBonus = playerData.skills.fishing * 0.05;
            const rodBonus = 0.1; // t·ª´ c·∫ßn c√¢u
            
            const successRate = Math.min(0.95, baseSuccessRate + levelBonus + skillBonus + rodBonus);
            
            if (Math.random() < successRate) {
                // T√≠nh tr·ªçng l∆∞·ª£ng c√°
                const baseWeight = 0.5;
                const randomFactor = Math.random() * 3;
                const luckBonus = playerData.skills.luck * 0.1;
                const weight = baseWeight + randomFactor + luckBonus;
                
                // T√≠nh EXP
                let expGained = Math.floor(weight * 20);
                
                // √Åp d·ª•ng s·ª± ki·ªán double EXP
                if (events.doubleExp.active) {
                    expGained *= events.doubleExp.multiplier;
                }
                
                // Th√™m c√° v√†o kho
                playerData.fishInventory.push({
                    name: "C√° L√≥c",
                    weight: parseFloat(weight.toFixed(2)),
                    exp: expGained,
                    value: Math.floor(weight * 100),
                    rarity: weight > 3 ? "rare" : "common"
                });
                
                // C·∫≠p nh·∫≠t th·ªëng k√™
                playerData.statistics.totalFishCaught++;
                if (weight > playerData.statistics.biggestFish) {
                    playerData.statistics.biggestFish = weight;
                }
                
                // Th√¥ng b√°o th√†nh c√¥ng
                const rarityText = weight > 3 ? " üéâ HI·∫æM!" : "";
                showNotification(`üé£ B·∫Øt ƒë∆∞·ª£c c√° L√≥c ${weight.toFixed(2)}kg! +${expGained} EXP${rarityText}`);
                
                // Hi·ªáu ·ª©ng xu
                createFloatingCoin(Math.floor(weight * 100), event.target);
                
            } else {
                showNotification("üí® C√° tho√°t m·∫•t r·ªìi!");
            }
            
            updateUI();
        }

        // H·ªá th·ªëng n√¢ng c·∫•p skill
        function upgradeSkill(skill) {
            const upgradeCost = playerData.skills[skill] * 100;
            
            if (playerData.coins >= upgradeCost) {
                playerData.coins -= upgradeCost;
                playerData.skills[skill]++;
                showNotification(`‚≠ê N√¢ng c·∫•p ${skill} th√†nh c√¥ng!`);
                updateUI();
            } else {
                showNotification(`üí∞ C·∫ßn ${upgradeCost} xu ƒë·ªÉ n√¢ng c·∫•p`);
            }
        }

        // ========== H√ÄM HI·ªÇN TH·ªä TH√îNG B√ÅO ==========
        function displayMessage(text, duration = 3000) {
            const messageElement = document.getElementById("message");
            const messageText = document.getElementById("message-text");
            
            messageText.innerHTML = text;
            messageElement.classList.add("active");
            
            setTimeout(() => {
                messageElement.classList.remove("active");
            }, duration);
        }

        // ========== H√ÄM CHUY·ªÇN M√ÄN H√åNH ==========
        function showScreen(screenId) {
            // ·∫®n t·∫•t c·∫£ m√†n h√¨nh
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Hi·ªÉn th·ªã m√†n h√¨nh ƒë∆∞·ª£c ch·ªçn
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
                gameState.currentScreen = screenId;
            }
            
            // C·∫≠p nh·∫≠t UI
            updateUI();
        }

        // ========== H√ÄM C·∫¨P NH·∫¨T GIAO DI·ªÜN ==========
        function updateUI() {
            // C·∫≠p nh·∫≠t nƒÉng l∆∞·ª£ng
            updateEnergy();
            
            // C·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi ch∆°i
            document.getElementById("player-level").textContent = playerData.level;
            document.getElementById("player-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("player-hp").textContent = playerData.health;
            document.getElementById("player-energy").textContent = playerData.energy;
            document.getElementById("player-points").textContent = playerData.points;
            
            // C·∫≠p nh·∫≠t thanh HP v√† Energy
            const hpPercent = (playerData.health / playerData.maxHealth) * 100;
            document.getElementById("hp-fill").style.width = `${hpPercent}%`;
            
            const energyPercent = (playerData.energy / playerData.maxEnergy) * 100;
            const energyFill = document.getElementById("energy-fill");
            if (energyFill) energyFill.style.width = `${energyPercent}%`;
            
            // C·∫≠p nh·∫≠t thanh EXP
            const expNeeded = calculateExpNeeded();
            const expPercent = (playerData.exp / expNeeded) * 100;
            document.getElementById("exp-fill").style.width = `${expPercent}%`;
            document.getElementById("char-exp-needed").textContent = expNeeded.toLocaleString();
            
            // Ki·ªÉm tra v√† k√≠ch ho·∫°t s·ª± ki·ªán ng·∫´u nhi√™n
            checkRandomEvents();
        }

        function calculateExpNeeded() {
            return Math.floor(100 * Math.pow(playerData.level, 1.5));
        }

        function checkRandomEvents() {
            // 5% c∆° h·ªôi k√≠ch ho·∫°t s·ª± ki·ªán m·ªói l·∫ßn update
            if (Math.random() < 0.05 && gameState.activeEvents.length === 0) {
                const eventKeys = Object.keys(events);
                const randomEvent = eventKeys[Math.floor(Math.random() * eventKeys.length)];
                
                events[randomEvent].active = true;
                gameState.activeEvents.push(randomEvent);
                
                // Hi·ªÉn th·ªã banner s·ª± ki·ªán
                const eventBanner = document.getElementById('event-banner');
                eventBanner.textContent = `üéâ ${events[randomEvent].name}: ${events[randomEvent].description}`;
                eventBanner.style.display = 'block';
                
                // T·ª± ƒë·ªông t·∫Øt s·ª± ki·ªán sau 5 ph√∫t
                setTimeout(() => {
                    events[randomEvent].active = false;
                    gameState.activeEvents = gameState.activeEvents.filter(e => e !== randomEvent);
                    eventBanner.style.display = 'none';
                    showNotification(`‚è∞ S·ª± ki·ªán ${events[randomEvent].name} ƒë√£ k·∫øt th√∫c`);
                }, 300000); // 5 ph√∫t
            }
        }

        // ========== KH·ªûI T·∫†O GAME ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üéÆ Game C·∫Øm C√¢u Cao C·∫•p ƒë√£ kh·ªüi ƒë·ªông!");
            updateUI();
            
            // Hi·ªÉn th·ªã th√¥ng b√°o ch√†o m·ª´ng
            setTimeout(() => {
                showNotification("üé£ Ch√†o m·ª´ng ƒë·∫øn v·ªõi C·∫Øm C√¢u C√° L√≥c Premium!");
            }, 1000);
            
            // Auto-save m·ªói 30 gi√¢y
            setInterval(saveGame, 30000);
            
            // Auto-update UI m·ªói gi√¢y
            setInterval(updateUI, 1000);
        });

        // H·ªá th·ªëng l∆∞u game
        function saveGame() {
            const saveData = {
                playerData: playerData,
                gameState: gameState,
                timestamp: Date.now()
            };
            localStorage.setItem('fishingGamePremium', JSON.stringify(saveData));
            console.log("üíæ Game ƒë√£ ƒë∆∞·ª£c l∆∞u t·ª± ƒë·ªông");
        }

        function loadGame() {
            const saved = localStorage.getItem('fishingGamePremium');
            if (saved) {
                const saveData = JSON.parse(saved);
                playerData = { ...playerData, ...saveData.playerData };
                gameState = { ...gameState, ...saveData.gameState };
                showNotification("üîÑ ƒê√£ t·∫£i game th√†nh c√¥ng!");
                updateUI();
            }
        }

        // Th√™m h√†m to√†n c·ª•c ƒë·ªÉ debug
        window.debugGame = function() {
            console.log("=== üéÆ DEBUG GAME ===");
            console.log("Player Data:", playerData);
            console.log("Game State:", gameState);
            console.log("Active Events:", gameState.activeEvents);
        }

        // T·ª± ƒë·ªông load game khi kh·ªüi ƒë·ªông
        loadGame();
    </script>
</body>
</html>