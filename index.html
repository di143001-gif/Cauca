<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cáº¯m CÃ¢u CÃ¡ LÃ³c - PhiÃªn báº£n HoÃ n Chá»‰nh</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Arial', sans-serif;
        }
        
        :root {
            --primary-color: #ffc800;
            --secondary-color: #0046a0;
            --danger-color: #c80000;
            --success-color: #0a640a;
            --warning-color: #b4b400;
            --christmas-color: #ff0000;
        }
        
        body {
            background: linear-gradient(135deg, #0a640a, #1e7c1e, #2a8a2a);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            padding: 10px;
        }
        
        #game-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
            min-height: 90vh;
            position: relative;
            overflow: hidden;
        }
        
        #game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--success-color));
            z-index: 10;
        }
        
        .screen {
            display: none;
            width: 100%;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block !important;
        }
        
        h1, h2, h3 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            font-size: 24px;
            background: linear-gradient(45deg, var(--primary-color), #ffeb3b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(50, 50, 50, 0.9);
            padding: 15px;
            border-radius: 15px;
            font-size: 14px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .stat-item::after {
            content: '';
            position: absolute;
            right: 0;
            top: 10%;
            height: 80%;
            width: 1px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .stat-item:last-child::after {
            display: none;
        }
        
        .button {
            display: block;
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            background: var(--primary-color);
            color: black;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .button:hover::before {
            left: 100%;
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }
        
        .button:active {
            transform: translateY(0);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .button.red {
            background: linear-gradient(45deg, var(--danger-color), #ff4444);
            color: white;
        }
        
        .button.blue {
            background: linear-gradient(45deg, var(--secondary-color), #0066cc);
            color: white;
        }
        
        .button.green {
            background: linear-gradient(45deg, var(--success-color), #2a8a2a);
            color: white;
        }
        
        .button.market {
            background: linear-gradient(45deg, var(--warning-color), #d4d400);
            color: white;
        }
        
        .button.christmas {
            background: linear-gradient(45deg, var(--christmas-color), #ff4444);
            color: white;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--christmas-color); }
            50% { box-shadow: 0 0 20px var(--christmas-color); }
        }
        
        .button.premium {
            background: linear-gradient(45deg, #ffd700, #ff6b00);
            color: black;
            border: 2px solid #ffd700;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(100, 100, 100, 0.5);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .hp-bar .progress-fill {
            background: linear-gradient(90deg, #ff0000, #ff6b6b);
        }
        
        .exp-bar .progress-fill {
            background: linear-gradient(90deg, #00ffff, #00b3b3);
        }
        
        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            display: none;
            width: 85%;
            max-width: 350px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.8);
            border: 2px solid var(--primary-color);
            animation: popIn 0.3s ease;
        }
        
        @keyframes popIn {
            from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .message.active {
            display: block;
        }
        
        .back-button {
            margin-top: 25px;
            background: rgba(100, 100, 100, 0.7) !important;
        }
        
        .inventory-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 8px 0;
            background: rgba(50, 50, 50, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .inventory-item:hover {
            background: rgba(70, 70, 70, 0.8);
            transform: translateX(5px);
        }
        
        .rod-item {
            background: rgba(0, 70, 160, 0.3);
            border-left: 4px solid var(--secondary-color);
        }
        
        .fish-item {
            background: rgba(10, 100, 10, 0.3);
            border-left: 4px solid var(--success-color);
        }
        
        .premium-item {
            background: rgba(255, 215, 0, 0.2);
            border-left: 4px solid #ffd700;
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            background: var(--primary-color);
            color: black;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .badge.premium {
            background: #ffd700;
        }
        
        .badge.new {
            background: var(--danger-color);
            color: white;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .event-banner {
            background: linear-gradient(45deg, var(--christmas-color), #ff6b6b);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(255, 0, 0, 0.3);
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .event-banner.double-exp {
            background: linear-gradient(45deg, #00ff00, #00b300);
        }
        
        .event-banner.lucky-day {
            background: linear-gradient(45deg, #ffd700, #ff6b00);
        }
        
        .event-banner.golden-fish {
            background: linear-gradient(45deg, #ffd700, #ffaa00);
        }
        
        .achievement {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
        }
        
        .fishing-slot {
            background: rgba(0, 70, 160, 0.4);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .fishing-slot:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }
        
        .location-slot {
            background: rgba(0, 70, 160, 0.5);
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .location-slot:hover {
            background: rgba(0, 70, 160, 0.7);
            transform: scale(1.02);
        }
        
        .upgrade-option {
            background: rgba(50, 50, 50, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-color);
        }
        
        .timer {
            font-size: 12px;
            color: #ffeb3b;
            font-weight: bold;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            display: none;
            animation: slideIn 0.5s ease;
            max-width: 300px;
            word-wrap: break-word;
        }
        
        .notification.queue {
            animation: slideInQueue 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInQueue {
            from { transform: translateX(100%) translateY(20px); opacity: 0; }
            to { transform: translateX(0) translateY(0); opacity: 1; }
        }
        
        .floating-coin {
            position: absolute;
            animation: float 1s ease-out;
            font-size: 20px;
            color: #ffd700;
            font-weight: bold;
            pointer-events: none;
        }
        
        @keyframes float {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        .shop-item {
            background: rgba(50, 50, 50, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-color);
        }
        
        .skill-item {
            background: rgba(0, 70, 160, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--secondary-color);
        }
        
        .event-effect {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: 5;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .event-effect.active {
            opacity: 1;
            animation: sparkle 2s infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        
        .login-form {
            background: rgba(50, 50, 50, 0.7);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
        }
        
        .login-form input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
        }
        
        .login-form input::placeholder {
            color: #ccc;
        }
        
        .user-info {
            background: rgba(0, 70, 160, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
        }
        
        .github-status {
            font-size: 12px;
            color: #ccc;
            margin-top: 5px;
        }
        
        .github-status.connected {
            color: #00ff00;
        }
        
        .github-status.error {
            color: #ff4444;
        }
        
        .auto-login-info {
            background: rgba(0, 100, 0, 0.5);
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-size: 14px;
        }
        
        .location-slot.inactive {
            opacity: 0.6;
            background: rgba(100, 100, 100, 0.5);
        }
        
        .location-slot.inactive:hover {
            background: rgba(100, 100, 100, 0.5);
            transform: none;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- Hiá»‡u á»©ng sá»± kiá»‡n -->
        <div id="event-effect" class="event-effect"></div>
        
        <!-- ThÃ´ng bÃ¡o ná»•i -->
        <div id="notification" class="notification"></div>
        
        <!-- MÃ n hÃ¬nh Ä‘Äƒng nháº­p -->
        <div id="login-screen" class="screen active">
            <h1>ğŸ£ Cáº®M CÃ‚U CÃ LÃ“C ğŸ£</h1>
            
            <div class="auto-login-info">
                <h3>âœ… ÄÃƒ Tá»° Äá»˜NG Káº¾T Ná»I GITHUB</h3>
                <div>Dá»¯ liá»‡u game sáº½ tá»± Ä‘á»™ng lÆ°u lÃªn GitHub</div>
                <div>TÃ i khoáº£n: <strong>di143001-gif/fishing-save</strong></div>
            </div>
            
            <div class="login-form">
                <h3>Táº¡o tÃ i khoáº£n má»›i hoáº·c Ä‘Äƒng nháº­p</h3>
                <input type="text" id="username" placeholder="TÃªn ngÆ°á»i chÆ¡i (khÃ´ng dáº¥u)">
                <input type="password" id="password" placeholder="Máº­t kháº©u">
                
                <button class="button green" onclick="register()">ğŸ“ ÄÄ‚NG KÃ</button>
                <button class="button blue" onclick="login()">ğŸš€ ÄÄ‚NG NHáº¬P</button>
            </div>
            
            <div class="user-info" id="user-info" style="display: none;">
                <h3>ThÃ´ng tin ngÆ°á»i dÃ¹ng</h3>
                <div id="current-user">ChÆ°a Ä‘Äƒng nháº­p</div>
                <div class="github-status connected" id="github-status">âœ… ÄÃ£ káº¿t ná»‘i GitHub tá»± Ä‘á»™ng</div>
            </div>
            
            <button class="button red" onclick="autoLoginAndPlay()">ğŸ® CHÆ I NGAY (Tá»± Ä‘á»™ng Ä‘Äƒng nháº­p)</button>
        </div>
        
        <!-- MÃ n hÃ¬nh chÃ­nh -->
        <div id="main-menu" class="screen">
            <h1>ğŸ£ Cáº®M CÃ‚U CÃ LÃ“C ğŸ£</h1>
            
            <div class="user-info" id="main-user-info">
                <div id="main-user">ChÆ°a Ä‘Äƒng nháº­p</div>
                <div class="github-status connected" id="main-github-status">âœ… ÄÃ£ káº¿t ná»‘i GitHub tá»± Ä‘á»™ng</div>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>â­ Cáº¥p: <span id="player-level">1</span></div>
                </div>
                <div class="stat-item">
                    <div>ğŸ’° Xu: <span id="player-coins">1500</span></div>
                </div>
                <div class="stat-item">
                    <div>â¤ï¸ HP: <span id="player-hp">100</span>/100</div>
                </div>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>ğŸŸ CÃ¡: <span id="player-fish">0</span> con</div>
                </div>
                <div class="stat-item">
                    <div>ğŸ† Äiá»ƒm: <span id="player-points">0</span></div>
                </div>
            </div>
            
            <!-- Banner sá»± kiá»‡n -->
            <div id="event-banner" class="event-banner" style="display: none;">
                ğŸ‰ Sá»° KIá»†N ÄANG DIá»„N RA! ğŸ‰
            </div>
            
            <button class="button blue" onclick="showScreen('character-screen')">
                ğŸ‘¤ THÃ”NG TIN NHÃ‚N Váº¬T
            </button>
            <button class="button" onclick="showScreen('inventory-screen')">
                ğŸ’ TÃšI Äá»’ & SHOP
            </button>
            <button class="button green" onclick="showScreen('select-location')">
                ğŸ¯ ÄI Cáº®M CÃ‚U
            </button>
            <button class="button red" onclick="showScreen('steal-menu')">
                ğŸ•µï¸ THÄ‚M TRá»˜M Cáº¦N <span class="badge">-20 HP</span>
            </button>
            <button class="button market" onclick="showScreen('market-screen')">
                ğŸª CHá»¢ CÃ <span class="badge new">Má»šI</span>
            </button>
            <button class="button christmas" onclick="showScreen('events-screen')">
                ğŸ„ Sá»° KIá»†N <span class="badge">HOT</span>
            </button>
            <button class="button premium" onclick="showScreen('achievements-screen')">
                ğŸ† THÃ€NH Tá»°U
            </button>
            <button class="button" onclick="showScreen('account-screen')">
                ğŸ” TÃ€I KHOáº¢N
            </button>
        </div>
        
        <!-- MÃ n hÃ¬nh tÃ i khoáº£n -->
        <div id="account-screen" class="screen">
            <h1>ğŸ” TÃ€I KHOáº¢N</h1>
            
            <div class="user-info">
                <h3>ThÃ´ng tin ngÆ°á»i dÃ¹ng</h3>
                <div id="account-user">ChÆ°a Ä‘Äƒng nháº­p</div>
                <div class="github-status connected" id="account-github-status">âœ… ÄÃ£ káº¿t ná»‘i GitHub tá»± Ä‘á»™ng</div>
            </div>
            
            <div class="login-form">
                <h3>ÄÄƒng nháº­p / ÄÄƒng kÃ½</h3>
                <input type="text" id="account-username" placeholder="TÃªn ngÆ°á»i chÆ¡i (khÃ´ng dáº¥u)">
                <input type="password" id="account-password" placeholder="Máº­t kháº©u">
                
                <button class="button green" onclick="register()">ğŸ“ ÄÄ‚NG KÃ</button>
                <button class="button blue" onclick="login()">ğŸš€ ÄÄ‚NG NHáº¬P</button>
                
                <div style="margin-top: 20px;">
                    <h3>ğŸŒ LÆ°u dá»¯ liá»‡u trÃªn GitHub</h3>
                    <div class="auto-login-info">
                        <div>âœ… ÄÃ£ tá»± Ä‘á»™ng káº¿t ná»‘i</div>
                        <div>Token: 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</div>
                        <div>Repository: di143001-gif/fishing-save</div>
                    </div>
                    
                    <button class="button" onclick="loadFromGitHub()">ğŸ“¥ Táº¢I Tá»ª GITHUB</button>
                    <button class="button green" onclick="saveToGitHub()">ğŸ“¤ LÆ¯U LÃŠN GITHUB</button>
                </div>
            </div>
            
            <button class="button red" onclick="logout()">ğŸšª ÄÄ‚NG XUáº¤T</button>
            <button class="button back-button" onclick="showScreen('main-menu')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh thÃ´ng tin nhÃ¢n váº­t -->
        <div id="character-screen" class="screen">
            <h1>ğŸ‘¤ THÃ”NG TIN NHÃ‚N Váº¬T</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>TÃªn: <span id="char-name">NgÆ° Phá»§ LÃ ng ChÃ i</span></div>
                </div>
                <div class="stat-item">
                    <div>Cáº¥p: <span id="char-level">1</span></div>
                </div>
                <div class="stat-item">
                    <div>Xu: <span id="char-coins">1500</span></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div>HP: <span id="char-hp">100</span>/100</div>
                <div class="progress-bar hp-bar">
                    <div class="progress-fill" id="char-hp-fill" style="width: 100%"></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div>EXP: <span id="char-exp">0</span>/<span id="char-exp-needed">100</span></div>
                <div class="progress-bar exp-bar">
                    <div class="progress-fill" id="char-exp-fill" style="width: 0%"></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div>CÃ¡ Ä‘Ã£ báº¯t: <span id="fish-caught">0</span> con (<span id="fish-weight">0.00</span> kg)</div>
                <div>CÃ¡ lá»›n nháº¥t: <span id="biggest-fish">0.00</span> kg</div>
            </div>
            
            <h3>ğŸ¯ Ká»¸ NÄ‚NG</h3>
            <div class="skill-item">
                <div>ğŸ£ Ká»¹ nÄƒng cÃ¢u cÃ¡: <span id="skill-fishing">1</span></div>
                <button class="button" onclick="upgradeSkill('fishing')">NÃ¢ng cáº¥p (100ğŸ’°)</button>
            </div>
            <div class="skill-item">
                <div>ğŸ€ May máº¯n: <span id="skill-luck">1</span></div>
                <button class="button" onclick="upgradeSkill('luck')">NÃ¢ng cáº¥p (100ğŸ’°)</button>
            </div>
            <div class="skill-item">
                <div>ğŸ’ª Sá»©c chá»‹u Ä‘á»±ng: <span id="skill-endurance">1</span></div>
                <button class="button" onclick="upgradeSkill('endurance')">NÃ¢ng cáº¥p (100ğŸ’°)</button>
            </div>
            
            <button class="button back-button" onclick="showScreen('main-menu')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh tÃºi Ä‘á»“ -->
        <div id="inventory-screen" class="screen">
            <h1>ğŸ’ TÃšI Äá»’ & SHOP</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>Cáº§n cÃ¢u: <span id="inventory-rods-count">2</span>/<span id="inventory-max-rods">5</span></div>
                </div>
                <div class="stat-item">
                    <div>Xu: <span id="inventory-coins">1500</span></div>
                </div>
            </div>
            
            <h3>ğŸ£ Cáº¦N CÃ‚U Cá»¦A Báº N</h3>
            <div id="rods-container">
                <!-- Cáº§n cÃ¢u sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y -->
            </div>
            
            <h3>ğŸŸ CÃ TRONG KHO</h3>
            <div id="fish-container">
                <!-- CÃ¡ sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y -->
            </div>
            
            <button class="button green" onclick="showScreen('shop-screen')">ğŸ›’ Cá»¬A HÃ€NG</button>
            <button class="button red" onclick="showScreen('sell-fish-screen')">ğŸ’° BÃN CÃ</button>
            
            <button class="button back-button" onclick="showScreen('main-menu')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh cá»­a hÃ ng -->
        <div id="shop-screen" class="screen">
            <h1>ğŸ›’ Cá»¬A HÃ€NG</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>Xu hiá»‡n táº¡i: <span id="shop-coins">1500</span></div>
                </div>
            </div>
            
            <h3>ğŸ£ Cáº¦N CÃ‚U</h3>
            <div class="shop-item">
                <div><strong>Cáº§n Sáº¯t</strong> - Thá»i gian cáº¯m: 15 phÃºt</div>
                <div>GiÃ¡: 10,000ğŸ’°</div>
                <button class="button" onclick="buyRod('iron')">MUA NGAY</button>
            </div>
            
            <div class="shop-item">
                <div><strong>Cáº§n VÃ ng</strong> - Thá»i gian cáº¯m: 20 phÃºt <span class="badge premium">PREMIUM</span></div>
                <div>GiÃ¡: 50,000ğŸ’°</div>
                <button class="button premium" onclick="buyRod('gold')">MUA NGAY</button>
            </div>
            
            <h3>âš¡ NÃ‚NG Cáº¤P</h3>
            <div class="shop-item">
                <div><strong>Má»Ÿ rá»™ng giá»›i háº¡n cáº§n cÃ¢u</strong></div>
                <div>Hiá»‡n táº¡i: <span id="current-rod-limit">5</span> cáº§n</div>
                <div>GiÃ¡: 50,000ğŸ’°</div>
                <button class="button blue" onclick="upgradeRodLimit()">NÃ‚NG Cáº¤P</button>
            </div>
            
            <button class="button back-button" onclick="showScreen('inventory-screen')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh bÃ¡n cÃ¡ -->
        <div id="sell-fish-screen" class="screen">
            <h1>ğŸ’° BÃN CÃ</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>Xu hiá»‡n táº¡i: <span id="sell-coins">1500</span></div>
                </div>
                <div class="stat-item">
                    <div>Tá»•ng giÃ¡ trá»‹: <span id="total-fish-value">0</span>ğŸ’°</div>
                </div>
            </div>
            
            <div style="margin: 15px 0;">
                <div>GiÃ¡ bÃ¡n CÃ¡ LÃ³c: 100ğŸ’°/kg</div>
            </div>
            
            <div id="sell-fish-container">
                <!-- CÃ¡ Ä‘á»ƒ bÃ¡n sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y -->
            </div>
            
            <button class="button red" onclick="sellAllFish()">ğŸ’° BÃN Táº¤T Cáº¢ CÃ</button>
            
            <button class="button back-button" onclick="showScreen('inventory-screen')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh chá»n khu vá»±c -->
        <div id="select-location" class="screen">
            <h1>ğŸ¯ CHá»ŒN KHU Vá»°C Cáº®M CÃ‚U</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div>Cáº¥p hiá»‡n táº¡i: <span id="location-level">1</span></div>
                </div>
            </div>
            
            <div class="location-slot active" onclick="selectLocation('Khu Äá»“ng Lá»›n')">
                <div><strong>Khu Äá»“ng Lá»›n</strong></div>
                <div>Tá»· lá»‡ báº¯t cÃ¡: 15% má»—i phÃºt</div>
                <div>CÃ¡ thÆ°á»ng: 0.1-2kg</div>
                <div>YÃªu cáº§u: Cáº¥p 1</div>
            </div>
            
            <div class="location-slot inactive" onclick="selectLocation('Khu Rá»«ng TrÃ m')">
                <div><strong>Khu Rá»«ng TrÃ m</strong> <span class="badge new">Má»šI</span></div>
                <div>Tá»· lá»‡ báº¯t cÃ¡: 10% má»—i phÃºt</div>
                <div>CÃ¡ lá»›n: 0.5-3kg</div>
                <div>YÃªu cáº§u: Cáº¥p 7</div>
            </div>
            
            <div class="location-slot inactive" onclick="selectLocation('Há»“ ThiÃªng')">
                <div><strong>Há»“ ThiÃªng</strong> <span class="badge premium">PREMIUM</span></div>
                <div>Tá»· lá»‡ báº¯t cÃ¡: 5% má»—i phÃºt</div>
                <div>CÃ¡ khá»•ng lá»“: 1-5kg</div>
                <div>YÃªu cáº§u: Cáº¥p 15</div>
            </div>
            
            <button class="button back-button" onclick="showScreen('main-menu')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh chá»n kÃªnh -->
        <div id="select-channel" class="screen">
            <h1 id="channel-location">KHU Vá»°C: Khu Äá»“ng Lá»›n</h1>
            <h2>ğŸ“¡ CHá»ŒN KÃŠNH</h2>
            
            <div class="location-slot active" onclick="selectChannel('KÃªnh A')">
                <div><strong>KÃªnh A</strong></div>
                <div>ÄÃ´ng ngÆ°á»i cÃ¢u</div>
                <div>Tá»· lá»‡ +5%</div>
            </div>
            
            <div class="location-slot active" onclick="selectChannel('KÃªnh B')">
                <div><strong>KÃªnh B</strong></div>
                <div>Váº¯ng váº»</div>
                <div>CÃ¡ lá»›n +10%</div>
            </div>
            
            <div class="location-slot active" onclick="selectChannel('KÃªnh C')">
                <div><strong>KÃªnh C</strong></div>
                <div>KÃªnh cao cáº¥p</div>
                <div>EXP +15%</div>
            </div>
            
            <button class="button back-button" onclick="showScreen('select-location')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh cÃ¢u cÃ¡ -->
        <div id="fishing-screen" class="screen">
            <h1 id="fishing-location">Khu Äá»“ng Lá»›n - KÃªnh A</h1>
            
            <div id="fishing-slots">
                <div class="fishing-slot">
                    <div style="font-weight: bold; margin-bottom: 10px;">ğŸ£ Ã” Cáº®M CÃ‚U 1</div>
                    <div id="slot-1-status">Trá»‘ng</div>
                    <div id="slot-1-timer" class="timer"></div>
                    <button class="button" id="slot-1-button" onclick="startFishing(0)">ğŸ£ Cáº®M CÃ‚U</button>
                </div>
                <div class="fishing-slot">
                    <div style="font-weight: bold; margin-bottom: 10px;">ğŸ£ Ã” Cáº®M CÃ‚U 2</div>
                    <div id="slot-2-status">Trá»‘ng</div>
                    <div id="slot-2-timer" class="timer"></div>
                    <button class="button" id="slot-2-button" onclick="startFishing(1)">ğŸ£ Cáº®M CÃ‚U</button>
                </div>
            </div>
            
            <div class="stats-bar" style="margin-top: 15px;">
                <div class="stat-item">
                    <div>Cáº§n Trá»‘ng: <span id="free-rods">2</span>/<span id="fishing-max-rods">5</span></div>
                </div>
                <div class="stat-item">
                    <div>CÃ¡ Ä‘Ã£ báº¯t: <span id="fishing-fish-count">0</span> con</div>
                </div>
            </div>
            
            <button class="button back-button" onclick="showScreen('select-channel')">â† Quay Láº¡i KÃªnh</button>
        </div>
        
        <!-- MÃ n hÃ¬nh thÄƒm trá»™m -->
        <div id="steal-menu" class="screen">
            <h1>ğŸ•µï¸ THÄ‚M TRá»˜M Cáº¦N</h1>
            
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 18px; margin-bottom: 15px;">HÃ nh Ä‘á»™ng nÃ y tá»‘n 20 HP. Báº¡n cÃ³ cháº¯c muá»‘n Ä‘i luÃ´n khÃ´ng?</div>
                <div style="font-size: 16px;">HP hiá»‡n táº¡i: <span id="steal-hp">100</span>/100</div>
            </div>
            
            <button class="button red" onclick="startStealing()">ğŸ•µï¸ ÄI LUÃ”N</button>
            <button class="button blue back-button" onclick="showScreen('main-menu')">ğŸ¤” SUY NGHÄ¨ Láº I</button>
        </div>
        
        <!-- MÃ n hÃ¬nh chá»£ cÃ¡ -->
        <div id="market-screen" class="screen">
            <h1>ğŸª CHá»¢ CÃ</h1>
            <div style="text-align: center; margin: 20px 0;">
                <p>TÃ­nh nÄƒng Ä‘ang Ä‘Æ°á»£c phÃ¡t triá»ƒn...</p>
                <p>ğŸ‘¨â€ğŸ’» Sáº¯p ra máº¯t!</p>
            </div>
            <button class="button back-button" onclick="showScreen('main-menu')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh sá»± kiá»‡n -->
        <div id="events-screen" class="screen">
            <h1>ğŸ„ Sá»° KIá»†N</h1>
            <div id="events-container">
                <!-- Danh sÃ¡ch sá»± kiá»‡n sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y -->
            </div>
            <button class="button back-button" onclick="showScreen('main-menu')">â† Quay Láº¡i</button>
        </div>
        
        <!-- MÃ n hÃ¬nh thÃ nh tá»±u -->
        <div id="achievements-screen" class="screen">
            <h1>ğŸ† THÃ€NH Tá»°U</h1>
            <div style="text-align: center; margin: 20px 0;">
                <p>TÃ­nh nÄƒng Ä‘ang Ä‘Æ°á»£c phÃ¡t triá»ƒn...</p>
                <p>ğŸ‘¨â€ğŸ’» Sáº¯p ra máº¯t!</p>
            </div>
            <button class="button back-button" onclick="showScreen('main-menu')">â† Quay Láº¡i</button>
        </div>
    </div>
    
    <!-- ThÃ´ng bÃ¡o -->
    <div id="message" class="message">
        <div id="message-text">ThÃ´ng bÃ¡o</div>
    </div>

    <script>
        // ========== Cáº¤U HÃŒNH GITHUB Tá»° Äá»˜NG ==========
        const AUTO_GITHUB_CONFIG = {
            token: "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",
            repo: "di143001-gif/fishing-save",
            connected: true
        };

        // ========== Há»† THá»NG THÃ”NG BÃO ==========
        let notificationQueue = [];
        let isShowingNotification = false;
        const NOTIFICATION_DURATION = 1000;

        function showNotification(message, duration = NOTIFICATION_DURATION) {
            notificationQueue.push({ message, duration });
            if (!isShowingNotification) {
                processNotificationQueue();
            }
        }

        function processNotificationQueue() {
            if (notificationQueue.length === 0) {
                isShowingNotification = false;
                return;
            }

            isShowingNotification = true;
            const { message, duration } = notificationQueue.shift();
            
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            if (notificationQueue.length > 0) {
                notification.classList.add('queue');
            } else {
                notification.classList.remove('queue');
            }
            
            setTimeout(() => {
                notification.style.display = 'none';
                setTimeout(() => {
                    processNotificationQueue();
                }, 100);
            }, duration);
        }

        // ========== Há»† THá»NG ÄÄ‚NG NHáº¬P Tá»° Äá»˜NG ==========
        let currentUser = null;
        let githubConfig = AUTO_GITHUB_CONFIG;

        function autoLoginAndPlay() {
            // Táº¡o tÃ i khoáº£n tá»± Ä‘á»™ng náº¿u chÆ°a cÃ³
            const autoUsername = "Player_" + Math.floor(Math.random() * 10000);
            const autoPassword = "auto123";
            
            const users = JSON.parse(localStorage.getItem('fishingGameUsers') || '{}');
            if (!users[autoUsername]) {
                users[autoUsername] = {
                    password: btoa(autoPassword),
                    createdAt: new Date().toISOString()
                };
                localStorage.setItem('fishingGameUsers', JSON.stringify(users));
            }
            
            // ÄÄƒng nháº­p tá»± Ä‘á»™ng
            currentUser = autoUsername;
            localStorage.setItem('fishingGameCurrentUser', autoUsername);
            
            // Tá»± Ä‘á»™ng káº¿t ná»‘i GitHub
            githubConfig = AUTO_GITHUB_CONFIG;
            localStorage.setItem('fishingGameGitHubConfig', JSON.stringify(githubConfig));
            
            showNotification(`ğŸ‰ Tá»± Ä‘á»™ng Ä‘Äƒng nháº­p thÃ nh cÃ´ng! ChÃ o ${autoUsername}`);
            showScreen('main-menu');
            updateUserInfo();
            loadUserGameData();
            
            // Tá»± Ä‘á»™ng lÆ°u lÃªn GitHub sau 3 giÃ¢y
            setTimeout(() => {
                autoSaveToGitHub();
            }, 3000);
        }

        // HÃ m lÆ°u tá»± Ä‘á»™ng lÃªn GitHub
        async function autoSaveToGitHub() {
            if (!githubConfig.connected || !currentUser) return;
            
            try {
                const saveData = {
                    playerData: playerData,
                    gameState: {
                        ...gameState,
                        fishingSlots: gameState.fishingSlots.map(slot => ({
                            ...slot,
                            checkInterval: null,
                            finishTimeout: null
                        }))
                    },
                    timestamp: Date.now(),
                    version: "2.0",
                    user: currentUser
                };
                
                // Sá»­a lá»—i kÃ½ tá»± Ä‘áº·c biá»‡t
                const safeEncode = (str) => {
                    return btoa(unescape(encodeURIComponent(str)));
                };
                
                const content = safeEncode(JSON.stringify(saveData));
                const filename = `fishing_game_${currentUser}.json`;
                
                let sha = null;
                try {
                    const getResponse = await fetch(`https://api.github.com/repos/${githubConfig.repo}/contents/${filename}`, {
                        headers: {
                            'Authorization': `token ${githubConfig.token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    
                    if (getResponse.ok) {
                        const fileData = await getResponse.json();
                        sha = fileData.sha;
                    }
                } catch (error) {
                    // File chÆ°a tá»“n táº¡i
                }
                
                const response = await fetch(`https://api.github.com/repos/${githubConfig.repo}/contents/${filename}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: `Auto save game data for ${currentUser}`,
                        content: content,
                        sha: sha
                    })
                });
                
                if (response.ok) {
                    console.log('âœ… ÄÃ£ tá»± Ä‘á»™ng lÆ°u lÃªn GitHub');
                }
            } catch (error) {
                console.log('âš ï¸ KhÃ´ng thá»ƒ lÆ°u tá»± Ä‘á»™ng lÃªn GitHub:', error.message);
            }
        }

        // HÃ m lÆ°u thá»§ cÃ´ng lÃªn GitHub
        async function saveToGitHub() {
            if (!githubConfig.connected || !currentUser) {
                showNotification('âš ï¸ Vui lÃ²ng káº¿t ná»‘i GitHub vÃ  Ä‘Äƒng nháº­p!');
                return;
            }
            
            try {
                const saveData = {
                    playerData: playerData,
                    gameState: {
                        ...gameState,
                        fishingSlots: gameState.fishingSlots.map(slot => ({
                            ...slot,
                            checkInterval: null,
                            finishTimeout: null
                        }))
                    },
                    timestamp: Date.now(),
                    version: "2.0",
                    user: currentUser
                };
                
                const safeEncode = (str) => {
                    return btoa(unescape(encodeURIComponent(str)));
                };
                
                const content = safeEncode(JSON.stringify(saveData));
                const filename = `fishing_game_${currentUser}.json`;
                
                let sha = null;
                try {
                    const getResponse = await fetch(`https://api.github.com/repos/${githubConfig.repo}/contents/${filename}`, {
                        headers: {
                            'Authorization': `token ${githubConfig.token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    
                    if (getResponse.ok) {
                        const fileData = await getResponse.json();
                        sha = fileData.sha;
                    }
                } catch (error) {
                    // File chÆ°a tá»“n táº¡i
                }
                
                const response = await fetch(`https://api.github.com/repos/${githubConfig.repo}/contents/${filename}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: `Manual save game data for ${currentUser}`,
                        content: content,
                        sha: sha
                    })
                });
                
                if (response.ok) {
                    showNotification('âœ… ÄÃ£ lÆ°u dá»¯ liá»‡u lÃªn GitHub!');
                } else {
                    throw new Error('LÆ°u dá»¯ liá»‡u tháº¥t báº¡i');
                }
            } catch (error) {
                showNotification('âŒ Lá»—i khi lÆ°u lÃªn GitHub: ' + error.message);
            }
        }

        // HÃ m táº£i tá»« GitHub
        async function loadFromGitHub() {
            if (!githubConfig.connected || !currentUser) {
                showNotification('âš ï¸ Vui lÃ²ng káº¿t ná»‘i GitHub vÃ  Ä‘Äƒng nháº­p!');
                return;
            }
            
            try {
                const filename = `fishing_game_${currentUser}.json`;
                const response = await fetch(`https://api.github.com/repos/${githubConfig.repo}/contents/${filename}`, {
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (response.ok) {
                    const fileData = await response.json();
                    const content = atob(fileData.content);
                    const saveData = JSON.parse(content);
                    
                    // Load dá»¯ liá»‡u vÃ o game
                    playerData = { ...playerData, ...saveData.playerData };
                    
                    const { fishingSlots, ...otherGameState } = saveData.gameState;
                    gameState = { ...gameState, ...otherGameState };
                    
                    gameState.fishingSlots = gameState.fishingSlots.map(slot => ({
                        ...slot,
                        checkInterval: null,
                        finishTimeout: null,
                        status: "Trá»‘ng"
                    }));
                    
                    playerData.rodsInventory.forEach(rod => {
                        rod.status = "Trá»‘ng";
                    });
                    
                    showNotification('âœ… ÄÃ£ táº£i dá»¯ liá»‡u tá»« GitHub!');
                    updateUI();
                } else {
                    throw new Error('KhÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u');
                }
            } catch (error) {
                showNotification('âŒ Lá»—i khi táº£i tá»« GitHub: ' + error.message);
            }
        }

        // CÃ¡c hÃ m Ä‘Äƒng kÃ½/Ä‘Äƒng nháº­p thá»§ cÃ´ng
        function register() {
            const username = document.getElementById('username').value || document.getElementById('account-username').value;
            const password = document.getElementById('password').value || document.getElementById('account-password').value;
            
            if (!username || !password) {
                showNotification('âš ï¸ Vui lÃ²ng nháº­p tÃªn vÃ  máº­t kháº©u!');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('fishingGameUsers') || '{}');
            
            if (users[username]) {
                showNotification('âŒ TÃªn ngÆ°á»i dÃ¹ng Ä‘Ã£ tá»“n táº¡i!');
                return;
            }
            
            users[username] = {
                password: btoa(password),
                createdAt: new Date().toISOString()
            };
            
            localStorage.setItem('fishingGameUsers', JSON.stringify(users));
            showNotification('âœ… ÄÄƒng kÃ½ thÃ nh cÃ´ng! Vui lÃ²ng Ä‘Äƒng nháº­p.');
            
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('account-username').value = '';
            document.getElementById('account-password').value = '';
        }

        function login() {
            const username = document.getElementById('username').value || document.getElementById('account-username').value;
            const password = document.getElementById('password').value || document.getElementById('account-password').value;
            
            if (!username || !password) {
                showNotification('âš ï¸ Vui lÃ²ng nháº­p tÃªn vÃ  máº­t kháº©u!');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('fishingGameUsers') || '{}');
            const user = users[username];
            
            if (!user || user.password !== btoa(password)) {
                showNotification('âŒ Sai tÃªn Ä‘Äƒng nháº­p hoáº·c máº­t kháº©u!');
                return;
            }
            
            currentUser = username;
            localStorage.setItem('fishingGameCurrentUser', username);
            
            // Tá»± Ä‘á»™ng káº¿t ná»‘i GitHub
            githubConfig = AUTO_GITHUB_CONFIG;
            localStorage.setItem('fishingGameGitHubConfig', JSON.stringify(githubConfig));
            
            loadUserGameData();
            showNotification(`ğŸ‰ ChÃ o má»«ng ${username} trá»Ÿ láº¡i!`);
            showScreen('main-menu');
            updateUserInfo();
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('fishingGameCurrentUser');
            showNotification('ğŸšª ÄÃ£ Ä‘Äƒng xuáº¥t!');
            showScreen('login-screen');
            updateUserInfo();
        }

        function updateUserInfo() {
            const userInfo = document.getElementById('user-info');
            const currentUserEl = document.getElementById('current-user');
            const mainUserEl = document.getElementById('main-user');
            const accountUserEl = document.getElementById('account-user');
            
            if (currentUser) {
                userInfo.style.display = 'block';
                currentUserEl.textContent = `NgÆ°á»i chÆ¡i: ${currentUser}`;
                mainUserEl.textContent = `NgÆ°á»i chÆ¡i: ${currentUser}`;
                accountUserEl.textContent = `NgÆ°á»i chÆ¡i: ${currentUser}`;
            } else {
                userInfo.style.display = 'none';
                currentUserEl.textContent = 'ChÆ°a Ä‘Äƒng nháº­p';
                mainUserEl.textContent = 'ChÆ°a Ä‘Äƒng nháº­p';
                accountUserEl.textContent = 'ChÆ°a Ä‘Äƒng nháº­p';
            }
        }

        // ========== Dá»® LIá»†U TRÃ’ CHÆ I ==========
        let gameState = {
            currentScreen: "main-menu",
            currentLocation: null,
            currentChannel: null,
            lastFishingTime: 0,
            lastHpRegen: Date.now(),
            activeEvents: [],
            achievements: [],
            dailyRewards: {},
            fishingSlots: [
                { 
                    id: 0, 
                    status: "Trá»‘ng", 
                    rodId: null, 
                    startTime: 0,
                    endTime: 0,
                    checkInterval: null,
                    finishTimeout: null
                },
                { 
                    id: 1, 
                    status: "Trá»‘ng", 
                    rodId: null, 
                    startTime: 0,
                    endTime: 0,
                    checkInterval: null,
                    finishTimeout: null
                }
            ]
        };

        let playerData = {
            level: 1,
            exp: 0,
            coins: 1500,
            gems: 0,
            health: 100,
            maxHealth: 100,
            points: 0,
            fishInventory: [],
            rodsInventory: [
                { 
                    id: 1, 
                    name: "Cáº§n Tre", 
                    level: 1, 
                    status: "Trá»‘ng",
                    rarity: "common",
                    maxFishingTime: 10 * 60 * 1000,
                    type: "bamboo"
                },
                { 
                    id: 2, 
                    name: "Cáº§n Tre", 
                    level: 1, 
                    status: "Trá»‘ng",
                    rarity: "common",
                    maxFishingTime: 10 * 60 * 1000,
                    type: "bamboo"
                }
            ],
            itemsInventory: [],
            maxRods: 5,
            skills: {
                fishing: 1,
                luck: 1,
                endurance: 1
            },
            statistics: {
                totalFishCaught: 0,
                biggestFish: 0,
                totalEarnings: 0,
                playTime: 0
            }
        };

        // ThÃ´ng tin khu vá»±c cÃ¢u cÃ¡
        const fishingLocations = {
            "Khu Äá»“ng Lá»›n": {
                successRate: 0.15,
                minWeight: 0.1,
                maxWeight: 2.0,
                requiredLevel: 1
            },
            "Khu Rá»«ng TrÃ m": {
                successRate: 0.10,
                minWeight: 0.5,
                maxWeight: 3.0,
                requiredLevel: 7
            },
            "Há»“ ThiÃªng": {
                successRate: 0.05,
                minWeight: 1.0,
                maxWeight: 5.0,
                requiredLevel: 15
            }
        };

        // Há»‡ thá»‘ng sá»± kiá»‡n
        const events = {
            doubleExp: {
                name: "Double EXP",
                description: "Nháº­n gáº¥p Ä‘Ã´i kinh nghiá»‡m khi báº¯t cÃ¡",
                active: false,
                multiplier: 2.0,
                color: "double-exp",
                effect: "exp"
            },
            luckyDay: {
                name: "NgÃ y May Máº¯n",
                description: "TÄƒng 50% tá»· lá»‡ báº¯t cÃ¡ vÃ  cÃ¡ lá»›n hÆ¡n",
                active: false,
                multiplier: 1.5,
                color: "lucky-day",
                effect: "luck"
            },
            goldenFish: {
                name: "CÃ¡ VÃ ng",
                description: "CÃ³ cÆ¡ há»™i báº¯t Ä‘Æ°á»£c cÃ¡ vÃ ng giÃ¡ trá»‹ cao",
                active: false,
                multiplier: 1.0,
                color: "golden-fish",
                effect: "golden"
            }
        };

        // ========== HÃ€M CÆ  Báº¢N ==========
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
                gameState.currentScreen = screenId;
            }
            
            updateUI();
        }

        // ========== Há»† THá»NG CÃ‚U CÃ ==========
        function startFishing(slotIndex) {
            const freeRod = playerData.rodsInventory.find(rod => rod.status === "Trá»‘ng");
            if (!freeRod) {
                showNotification("ğŸ£ KhÃ´ng cÃ³ cáº§n cÃ¢u trá»‘ng!");
                return;
            }

            if (!gameState.currentLocation) {
                showNotification("âš ï¸ Vui lÃ²ng chá»n khu vá»±c cÃ¢u cÃ¡!");
                return;
            }

            const slot = gameState.fishingSlots[slotIndex];
            if (slot.checkInterval) {
                clearInterval(slot.checkInterval);
            }
            if (slot.finishTimeout) {
                clearTimeout(slot.finishTimeout);
            }

            freeRod.status = "Äang cÃ¢u";
            slot.status = "Äang cÃ¢u";
            slot.rodId = freeRod.id;
            slot.startTime = Date.now();
            slot.endTime = Date.now() + freeRod.maxFishingTime;

            showNotification(`ğŸ£ ÄÃ£ cáº¯m cáº§n táº¡i ${gameState.currentLocation}!`);
            updateUI();

            slot.checkInterval = setInterval(() => {
                checkForFish(slotIndex);
            }, 60000);

            setTimeout(() => {
                checkForFish(slotIndex);
            }, 1000);

            slot.finishTimeout = setTimeout(() => {
                finishFishing(slotIndex);
            }, freeRod.maxFishingTime);
            
            saveGame();
        }

        function checkForFish(slotIndex) {
            const slot = gameState.fishingSlots[slotIndex];
            const rod = playerData.rodsInventory.find(r => r.id === slot.rodId);
            
            if (!rod || rod.status !== "Äang cÃ¢u") return;

            const location = fishingLocations[gameState.currentLocation];
            let successRate = location.successRate;
            let minWeight = location.minWeight;
            let maxWeight = location.maxWeight;

            if (events.luckyDay.active) {
                successRate *= events.luckyDay.multiplier;
                minWeight *= 1.2;
                maxWeight *= 1.2;
            }

            if (Math.random() < successRate) {
                const weightRange = maxWeight - minWeight;
                const weight = minWeight + (Math.random() * weightRange);
                const finalWeight = parseFloat(weight.toFixed(2));
                
                let expGained = Math.floor(finalWeight * 20);
                let value = Math.floor(finalWeight * 100);
                
                let fishName = "CÃ¡ LÃ³c";
                let rarity = finalWeight > (maxWeight * 0.8) ? "rare" : "common";
                
                if (events.goldenFish.active && Math.random() < 0.1) {
                    fishName = "ğŸ  CÃ¡ VÃ ng";
                    value *= 5;
                    expGained *= 3;
                    rarity = "golden";
                }
                
                if (events.doubleExp.active) {
                    expGained = Math.floor(expGained * events.doubleExp.multiplier);
                }
                
                const fish = {
                    name: fishName,
                    weight: finalWeight,
                    exp: expGained,
                    value: value,
                    rarity: rarity
                };
                
                playerData.fishInventory.push(fish);
                playerData.exp += expGained;
                
                playerData.statistics.totalFishCaught++;
                if (finalWeight > playerData.statistics.biggestFish) {
                    playerData.statistics.biggestFish = finalWeight;
                }
                
                checkLevelUp();
                saveGame();
                
                let rarityText = "";
                if (rarity === "rare") {
                    rarityText = " ğŸ‰ HIáº¾M!";
                } else if (rarity === "golden") {
                    rarityText = " âœ¨ CÃ VÃ€NG!";
                }
                
                showNotification(`ğŸ£ Báº¯t Ä‘Æ°á»£c ${fishName} ${finalWeight}kg! +${expGained} EXP${rarityText}`);
                
                updateUI();
            }
        }

        function finishFishing(slotIndex) {
            const slot = gameState.fishingSlots[slotIndex];
            const rod = playerData.rodsInventory.find(r => r.id === slot.rodId);
            
            if (slot.checkInterval) {
                clearInterval(slot.checkInterval);
                slot.checkInterval = null;
            }
            if (slot.finishTimeout) {
                clearTimeout(slot.finishTimeout);
                slot.finishTimeout = null;
            }
            
            if (rod) {
                rod.status = "Trá»‘ng";
            }
            
            slot.status = "Trá»‘ng";
            slot.rodId = null;
            slot.startTime = 0;
            slot.endTime = 0;
            
            showNotification("ğŸ£ ÄÃ£ thu cáº§n!");
            saveGame();
            updateUI();
        }

        function collectFishing(slotIndex) {
            const slot = gameState.fishingSlots[slotIndex];
            if (slot.status === "Äang cÃ¢u") {
                finishFishing(slotIndex);
            }
        }

        // ========== Há»† THá»NG THÄ‚M TRá»˜M ==========
        function startStealing() {
            if (playerData.health >= 20) {
                playerData.health -= 20;
                
                if (Math.random() > 0.5) {
                    const weight = (Math.random() * 2 + 0.5).toFixed(2);
                    const value = Math.floor(weight * 80);
                    
                    playerData.fishInventory.push({
                        name: "CÃ¡ Trá»™m",
                        weight: parseFloat(weight),
                        exp: Math.floor(weight * 15),
                        value: value,
                        rarity: "stolen"
                    });
                    
                    showNotification(`ğŸ•µï¸ Trá»™m thÃ nh cÃ´ng! Báº¯t Ä‘Æ°á»£c cÃ¡ ${weight}kg! +${value}ğŸ’°`);
                } else {
                    showNotification("ğŸ•µï¸ Trá»™m tháº¥t báº¡i! Bá»‹ phÃ¡t hiá»‡n!");
                }
                
                saveGame();
                showScreen("main-menu");
            } else {
                showNotification("âš ï¸ KhÃ´ng Ä‘á»§ HP Ä‘á»ƒ thÄƒm trá»™m!");
            }
        }

        // ========== Há»† THá»NG MUA BÃN ==========
        function buyRod(type) {
            let cost, rod;
            
            switch(type) {
                case 'iron':
                    cost = 10000;
                    rod = {
                        id: playerData.rodsInventory.length + 1,
                        name: "Cáº§n Sáº¯t",
                        level: 1,
                        status: "Trá»‘ng",
                        rarity: "uncommon",
                        maxFishingTime: 15 * 60 * 1000,
                        type: "iron"
                    };
                    break;
                case 'gold':
                    cost = 50000;
                    rod = {
                        id: playerData.rodsInventory.length + 1,
                        name: "Cáº§n VÃ ng",
                        level: 1,
                        status: "Trá»‘ng",
                        rarity: "rare",
                        maxFishingTime: 20 * 60 * 1000,
                        type: "gold"
                    };
                    break;
                default:
                    return;
            }
            
            if (playerData.coins >= cost) {
                if (playerData.rodsInventory.length < playerData.maxRods) {
                    playerData.coins -= cost;
                    playerData.rodsInventory.push(rod);
                    saveGame();
                    showNotification(`ğŸ£ Mua ${rod.name} thÃ nh cÃ´ng!`);
                } else {
                    showNotification("ğŸ£ ÄÃ£ Ä‘áº¡t giá»›i háº¡n sá»‘ lÆ°á»£ng cáº§n cÃ¢u!");
                }
            } else {
                showNotification(`ğŸ’° KhÃ´ng Ä‘á»§ xu! Cáº§n ${cost.toLocaleString()}ğŸ’°`);
            }
            updateUI();
        }

        function upgradeRodLimit() {
            const cost = 50000;
            if (playerData.coins >= cost && playerData.maxRods < 10) {
                playerData.coins -= cost;
                playerData.maxRods++;
                saveGame();
                showNotification(`ğŸ£ NÃ¢ng cáº¥p thÃ nh cÃ´ng! Giá»›i háº¡n: ${playerData.maxRods} cáº§n`);
            } else if (playerData.maxRods >= 10) {
                showNotification("ğŸ£ ÄÃ£ Ä‘áº¡t giá»›i háº¡n tá»‘i Ä‘a!");
            } else {
                showNotification(`ğŸ’° KhÃ´ng Ä‘á»§ xu! Cáº§n ${cost.toLocaleString()}ğŸ’°`);
            }
            updateUI();
        }

        function sellAllFish() {
            if (playerData.fishInventory.length === 0) {
                showNotification("ğŸŸ KhÃ´ng cÃ³ cÃ¡ Ä‘á»ƒ bÃ¡n!");
                return;
            }
            
            const totalValue = playerData.fishInventory.reduce((sum, fish) => sum + fish.value, 0);
            playerData.coins += totalValue;
            playerData.statistics.totalEarnings += totalValue;
            
            showNotification(`ğŸ’° BÃ¡n thÃ nh cÃ´ng ${playerData.fishInventory.length} con cÃ¡! +${totalValue}ğŸ’°`);
            
            playerData.fishInventory = [];
            saveGame();
            updateUI();
        }

        // ========== Há»† THá»NG Ká»¸ NÄ‚NG ==========
        function upgradeSkill(skill) {
            const upgradeCost = playerData.skills[skill] * 100;
            
            if (playerData.coins >= upgradeCost) {
                playerData.coins -= upgradeCost;
                playerData.skills[skill]++;
                saveGame();
                showNotification(`â­ NÃ¢ng cáº¥p ${skill} thÃ nh cÃ´ng!`);
                updateUI();
            } else {
                showNotification(`ğŸ’° Cáº§n ${upgradeCost} xu Ä‘á»ƒ nÃ¢ng cáº¥p`);
            }
        }

        // ========== Há»† THá»NG Sá»° KIá»†N ==========
        function checkRandomEvents() {
            if (Math.random() < 0.08 && gameState.activeEvents.length === 0) {
                const eventKeys = Object.keys(events);
                const randomEvent = eventKeys[Math.floor(Math.random() * eventKeys.length)];
                activateEvent(randomEvent);
            }
        }

        function activateEvent(eventKey) {
            const event = events[eventKey];
            event.active = true;
            gameState.activeEvents.push(eventKey);
            
            const eventBanner = document.getElementById('event-banner');
            eventBanner.textContent = `ğŸ‰ ${event.name}: ${event.description}`;
            eventBanner.className = `event-banner ${event.color}`;
            eventBanner.style.display = 'block';
            
            const eventEffect = document.getElementById('event-effect');
            eventEffect.classList.add('active');
            
            showNotification(`ğŸ‰ Sá»± kiá»‡n ${event.name} Ä‘Ã£ báº¯t Ä‘áº§u!`);
            
            const duration = (3 + Math.random() * 4) * 60000;
            setTimeout(() => {
                deactivateEvent(eventKey);
            }, duration);
        }

        function deactivateEvent(eventKey) {
            const event = events[eventKey];
            event.active = false;
            gameState.activeEvents = gameState.activeEvents.filter(e => e !== eventKey);
            
            const eventBanner = document.getElementById('event-banner');
            eventBanner.style.display = 'none';
            
            const eventEffect = document.getElementById('event-effect');
            eventEffect.classList.remove('active');
            
            showNotification(`â° Sá»± kiá»‡n ${event.name} Ä‘Ã£ káº¿t thÃºc`);
        }

        // ========== Há»† THá»NG LEVEL ==========
        function checkLevelUp() {
            const expNeeded = calculateExpNeeded();
            if (playerData.exp >= expNeeded) {
                playerData.level++;
                playerData.exp -= expNeeded;
                playerData.maxHealth += 10;
                playerData.health = playerData.maxHealth;
                saveGame();
                showNotification(`ğŸ‰ CHÃšC Má»ªNG! LÃŠN Cáº¤P ${playerData.level}!`);
            }
        }

        function calculateExpNeeded() {
            return Math.floor(100 * Math.pow(playerData.level, 1.5));
        }

        // ========== CHá»ŒN KHU Vá»°C ==========
        function selectLocation(location) {
            const locationInfo = fishingLocations[location];
            if (locationInfo && playerData.level >= locationInfo.requiredLevel) {
                gameState.currentLocation = location;
                document.getElementById("channel-location").textContent = `KHU Vá»°C: ${location}`;
                showScreen("select-channel");
            } else {
                showNotification(`ğŸ”’ Cáº§n Ä‘áº¡t cáº¥p ${locationInfo.requiredLevel} Ä‘á»ƒ má»Ÿ khÃ³a khu vá»±c nÃ y!`);
            }
        }

        function selectChannel(channel) {
            gameState.currentChannel = channel;
            document.getElementById("fishing-location").textContent = `${gameState.currentLocation} - ${channel}`;
            showScreen("fishing-screen");
        }

        // ========== Há»† THá»NG LÆ¯U GAME ==========
        function saveGame() {
            try {
                const saveData = {
                    playerData: playerData,
                    gameState: {
                        ...gameState,
                        fishingSlots: gameState.fishingSlots.map(slot => ({
                            ...slot,
                            checkInterval: null,
                            finishTimeout: null
                        }))
                    },
                    timestamp: Date.now(),
                    version: "2.0"
                };
                
                localStorage.setItem('fishingGameSave', JSON.stringify(saveData));
                
                // LÆ°u dá»¯ liá»‡u ngÆ°á»i dÃ¹ng náº¿u Ä‘Ã£ Ä‘Äƒng nháº­p
                saveUserGameData();
                
            } catch (error) {
                console.error("âŒ Lá»—i khi lÆ°u game:", error);
            }
        }

        function loadGame() {
            try {
                // Æ¯u tiÃªn táº£i dá»¯ liá»‡u ngÆ°á»i dÃ¹ng náº¿u Ä‘Ã£ Ä‘Äƒng nháº­p
                if (currentUser) {
                    loadUserGameData();
                    return;
                }
                
                // Náº¿u khÃ´ng Ä‘Äƒng nháº­p, táº£i dá»¯ liá»‡u local thÃ´ng thÆ°á»ng
                const saved = localStorage.getItem('fishingGameSave');
                if (saved) {
                    const saveData = JSON.parse(saved);
                    
                    playerData = { ...playerData, ...saveData.playerData };
                    
                    const { fishingSlots, ...otherGameState } = saveData.gameState;
                    gameState = { ...gameState, ...otherGameState };
                    
                    gameState.fishingSlots = gameState.fishingSlots.map(slot => ({
                        ...slot,
                        checkInterval: null,
                        finishTimeout: null,
                        status: "Trá»‘ng"
                    }));
                    
                    playerData.rodsInventory.forEach(rod => {
                        rod.status = "Trá»‘ng";
                    });
                    
                    showNotification("ğŸ”„ ÄÃ£ táº£i dá»¯ liá»‡u game!");
                    
                }
            } catch (error) {
                console.error("âŒ Lá»—i khi táº£i game:", error);
            }
        }

        function saveUserGameData() {
            if (!currentUser) return;
            
            const saveData = {
                playerData: playerData,
                gameState: {
                    ...gameState,
                    fishingSlots: gameState.fishingSlots.map(slot => ({
                        ...slot,
                        checkInterval: null,
                        finishTimeout: null
                    }))
                },
                timestamp: Date.now(),
                version: "2.0"
            };
            
            localStorage.setItem(`fishingGameData_${currentUser}`, JSON.stringify(saveData));
        }

        function loadUserGameData() {
            if (!currentUser) return;
            
            const userGameData = localStorage.getItem(`fishingGameData_${currentUser}`);
            if (userGameData) {
                const saveData = JSON.parse(userGameData);
                
                playerData = { ...playerData, ...saveData.playerData };
                
                const { fishingSlots, ...otherGameState } = saveData.gameState;
                gameState = { ...gameState, ...otherGameState };
                
                gameState.fishingSlots = gameState.fishingSlots.map(slot => ({
                    ...slot,
                    checkInterval: null,
                    finishTimeout: null,
                    status: "Trá»‘ng"
                }));
                
                playerData.rodsInventory.forEach(rod => {
                    rod.status = "Trá»‘ng";
                });
                
                updateUI();
            }
        }

        // ========== Cáº¬P NHáº¬T GIAO DIá»†N ==========
        function updateUI() {
            updateHp();
            
            document.getElementById("player-level").textContent = playerData.level;
            document.getElementById("player-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("player-hp").textContent = playerData.health;
            document.getElementById("player-fish").textContent = playerData.fishInventory.length;
            document.getElementById("player-points").textContent = playerData.points;
            
            document.getElementById("char-level").textContent = playerData.level;
            document.getElementById("char-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("char-hp").textContent = playerData.health;
            document.getElementById("steal-hp").textContent = playerData.health;
            document.getElementById("location-level").textContent = playerData.level;
            
            const hpPercent = (playerData.health / playerData.maxHealth) * 100;
            document.getElementById("char-hp-fill").style.width = `${hpPercent}%`;
            
            const expNeeded = calculateExpNeeded();
            const expPercent = (playerData.exp / expNeeded) * 100;
            document.getElementById("char-exp").textContent = playerData.exp.toLocaleString();
            document.getElementById("char-exp-needed").textContent = expNeeded.toLocaleString();
            document.getElementById("char-exp-fill").style.width = `${expPercent}%`;
            
            const fishCount = playerData.fishInventory.length;
            const fishWeight = playerData.fishInventory.reduce((sum, fish) => sum + fish.weight, 0);
            document.getElementById("fish-caught").textContent = fishCount;
            document.getElementById("fish-weight").textContent = fishWeight.toFixed(2);
            document.getElementById("fishing-fish-count").textContent = fishCount;
            document.getElementById("biggest-fish").textContent = playerData.statistics.biggestFish.toFixed(2);
            
            document.getElementById("skill-fishing").textContent = playerData.skills.fishing;
            document.getElementById("skill-luck").textContent = playerData.skills.luck;
            document.getElementById("skill-endurance").textContent = playerData.skills.endurance;
            
            const freeRods = playerData.rodsInventory.filter(r => r.status === "Trá»‘ng").length;
            document.getElementById("inventory-rods-count").textContent = playerData.rodsInventory.length;
            document.getElementById("inventory-max-rods").textContent = playerData.maxRods;
            document.getElementById("free-rods").textContent = freeRods;
            document.getElementById("fishing-max-rods").textContent = playerData.maxRods;
            document.getElementById("current-rod-limit").textContent = playerData.maxRods;
            
            document.getElementById("shop-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("inventory-coins").textContent = playerData.coins.toLocaleString();
            document.getElementById("sell-coins").textContent = playerData.coins.toLocaleString();
            
            const totalFishValue = playerData.fishInventory.reduce((sum, fish) => sum + fish.value, 0);
            document.getElementById("total-fish-value").textContent = totalFishValue.toLocaleString();
            
            updateRodsList();
            updateFishList();
            updateFishingSlots();
            updateEventInfo();
            updateLocationAccess();
        }

        function updateHp() {
            const now = Date.now();
            const timeDiffHp = now - gameState.lastHpRegen;
            const hpGain = Math.floor(timeDiffHp / 60000);
            
            if (hpGain > 0) {
                playerData.health = Math.min(playerData.maxHealth, playerData.health + hpGain);
                gameState.lastHpRegen = now;
            }
        }

        function updateLocationAccess() {
            const locations = document.querySelectorAll('.location-slot');
            locations.forEach(location => {
                const locationName = location.querySelector('strong').textContent;
                const locationInfo = fishingLocations[locationName];
                
                if (locationInfo && playerData.level >= locationInfo.requiredLevel) {
                    location.classList.remove('inactive');
                    location.classList.add('active');
                } else {
                    location.classList.remove('active');
                    location.classList.add('inactive');
                }
            });
        }

        function updateRodsList() {
            const rodsContainer = document.getElementById("rods-container");
            if (rodsContainer) {
                rodsContainer.innerHTML = '';
                
                playerData.rodsInventory.forEach(rod => {
                    const rodElement = document.createElement("div");
                    rodElement.className = "inventory-item rod-item";
                    
                    let rarityBadge = "";
                    if (rod.rarity === "uncommon") rarityBadge = '<span class="badge">UNCOMMON</span>';
                    if (rod.rarity === "rare") rarityBadge = '<span class="badge premium">RARE</span>';
                    
                    const maxMinutes = rod.maxFishingTime / (60 * 1000);
                    
                    rodElement.innerHTML = `
                        <div>
                            <strong>${rod.name}</strong> ${rarityBadge}
                            <div style="font-size: 12px; color: #ccc;">
                                Thá»i gian: ${maxMinutes} phÃºt
                            </div>
                        </div>
                        <div>
                            ${rod.status}
                        </div>
                    `;
                    
                    rodsContainer.appendChild(rodElement);
                });
            }
        }

        function updateFishList() {
            const fishContainer = document.getElementById("fish-container");
            const sellFishContainer = document.getElementById("sell-fish-container");
            
            if (fishContainer) {
                fishContainer.innerHTML = '';
                
                if (playerData.fishInventory.length === 0) {
                    fishContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #ccc;">ChÆ°a cÃ³ cÃ¡ trong kho</div>';
                } else {
                    playerData.fishInventory.forEach((fish, index) => {
                        const fishElement = document.createElement("div");
                        fishElement.className = "inventory-item fish-item";
                        
                        let rarityText = "";
                        if (fish.rarity === "rare") rarityText = '<span class="badge new">HIáº¾M</span>';
                        if (fish.rarity === "stolen") rarityText = '<span class="badge">TRá»˜M</span>';
                        if (fish.rarity === "golden") rarityText = '<span class="badge premium">VÃ€NG</span>';
                        
                        fishElement.innerHTML = `
                            <div>
                                <strong>${fish.name}</strong> ${rarityText}
                                <div style="font-size: 12px; color: #ccc;">
                                    ${fish.weight} kg | GiÃ¡: ${fish.value}ğŸ’°
                                </div>
                            </div>
                        `;
                        
                        fishContainer.appendChild(fishElement);
                    });
                }
            }
            
            if (sellFishContainer) {
                sellFishContainer.innerHTML = '';
                
                if (playerData.fishInventory.length === 0) {
                    sellFishContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #ccc;">KhÃ´ng cÃ³ cÃ¡ Ä‘á»ƒ bÃ¡n</div>';
                } else {
                    const totalWeight = playerData.fishInventory.reduce((sum, fish) => sum + fish.weight, 0);
                    const totalValue = playerData.fishInventory.reduce((sum, fish) => sum + fish.value, 0);
                    
                    sellFishContainer.innerHTML = `
                        <div class="inventory-item">
                            <div>
                                <strong>Tá»•ng cá»™ng</strong>
                                <div style="font-size: 12px; color: #ccc;">
                                    ${playerData.fishInventory.length} con cÃ¡ | ${totalWeight.toFixed(2)} kg
                                </div>
                            </div>
                            <div>
                                <strong>${totalValue}ğŸ’°</strong>
                            </div>
                        </div>
                    `;
                }
            }
        }

        function updateFishingSlots() {
            gameState.fishingSlots.forEach((slot, index) => {
                const slotElement = document.getElementById(`slot-${index+1}-status`);
                const timerElement = document.getElementById(`slot-${index+1}-timer`);
                const buttonElement = document.getElementById(`slot-${index+1}-button`);
                
                if (slotElement && timerElement && buttonElement) {
                    if (slot.status === "Äang cÃ¢u") {
                        const timeLeft = Math.ceil((slot.endTime - Date.now()) / 1000);
                        if (timeLeft > 0) {
                            const minutes = Math.floor(timeLeft / 60);
                            const seconds = timeLeft % 60;
                            slotElement.textContent = "Äang cÃ¢u cÃ¡...";
                            timerElement.textContent = `â° ${minutes}:${seconds.toString().padStart(2, '0')}`;
                            buttonElement.textContent = "ğŸ£ THU CÃ‚N";
                            buttonElement.onclick = function() { collectFishing(index); };
                        } else {
                            finishFishing(index);
                        }
                    } else {
                        slotElement.textContent = "Trá»‘ng";
                        timerElement.textContent = "";
                        buttonElement.textContent = "ğŸ£ Cáº®M CÃ‚U";
                        buttonElement.onclick = function() { startFishing(index); };
                    }
                }
            });
        }

        function updateEventInfo() {
            const activeEventsCount = gameState.activeEvents.length;
            if (activeEventsCount > 0) {
                const eventBanner = document.getElementById('event-banner');
                if (eventBanner.style.display === 'none') {
                    const mainEvent = events[gameState.activeEvents[0]];
                    eventBanner.textContent = `ğŸ‰ ${mainEvent.name} ÄANG DIá»„N RA!`;
                    eventBanner.className = `event-banner ${mainEvent.color}`;
                    eventBanner.style.display = 'block';
                }
            }
        }

        // ========== KHá»I Táº O GAME ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log("ğŸ® Game Cáº¯m CÃ¢u CÃ¡ LÃ³c - Tá»± Ä‘á»™ng GitHub");
            
            // Tá»± Ä‘á»™ng Ä‘Äƒng nháº­p náº¿u cÃ³ user
            currentUser = localStorage.getItem('fishingGameCurrentUser');
            const savedGitHubConfig = localStorage.getItem('fishingGameGitHubConfig');
            if (savedGitHubConfig) {
                githubConfig = JSON.parse(savedGitHubConfig);
            } else {
                githubConfig = AUTO_GITHUB_CONFIG;
                localStorage.setItem('fishingGameGitHubConfig', JSON.stringify(githubConfig));
            }
            
            if (currentUser) {
                showScreen('main-menu');
                loadUserGameData();
            } else {
                showScreen('login-screen');
            }
            
            updateUserInfo();
            updateUI();
            
            setTimeout(() => {
                showNotification("ğŸ£ ChÃ o má»«ng Ä‘áº¿n vá»›i Cáº¯m CÃ¢u CÃ¡ LÃ³c Premium!");
                showNotification("âœ… ÄÃ£ tá»± Ä‘á»™ng káº¿t ná»‘i GitHub!");
            }, 1000);
            
            setInterval(saveGame, 30000);
            setInterval(updateUI, 1000);
            setInterval(updateFishingSlots, 1000);
            setInterval(checkRandomEvents, 30000);
        });
    </script>
</body>
</html>